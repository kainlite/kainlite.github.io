{
  "version": "https://jsonfeed.org/version/1",
  "title": "Kubernetes, CI/CD, Git, Linux, Containers, Golang... and more",
  "home_page_url": "https://kainlite.github.io/",
  "feed_url": "https://kainlite.github.io/index.json",
  "items": [
    
    {
      "id": "https://kainlite.github.io/blog/exploring_some_istio_features/",
      "url": "https://kainlite.github.io/blog/exploring_some_istio_features/",
      "title": "Exploring some Istio features",
      "date_published": "2019-01-10T00:00:00Z",
      "content_html": "\n\n\u003ch3 id=\"introduction\"\u003eIntroduction\u003c/h3\u003e\n\n\u003cp\u003eThis article builds up on what we did in the \u003ca href=\"https://kainlite.github.io/blog/why_do_i_need_a_service_mesh/\"\u003elast article\u003c/a\u003e, so refer to that one before starting this one, if you are planing to follow the documentation examples you will find many similarities since I based this article on that.\u003c/p\u003e\n\n\u003cp\u003eIn this example I will be using \u003ca href=\"https://m.do.co/c/01d040b789de\"\u003eDigital Ocean\u003c/a\u003e (that\u0026rsquo;s my referral link), note that I do not have any association with Digital Ocean but they give you $100 to test their products for 60 days, if you spend $25 I get another $25.\u003c/p\u003e\n\n\u003ch3 id=\"before-starting-a-few-concepts\"\u003eBefore starting a few concepts\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eA VirtualService defines the rules that control how requests for a service are routed within an Istio service mesh.\u003c/li\u003e\n\u003cli\u003eA DestinationRule configures the set of policies to be applied to a request after VirtualService routing has occurred.\u003c/li\u003e\n\u003cli\u003eA ServiceEntry is commonly used to enable requests to services outside of an Istio service mesh.\u003c/li\u003e\n\u003cli\u003eA Gateway configures a load balancer for HTTP/TCP traffic, most commonly operating at the edge of the mesh to enable ingress traffic for an application.\nThese basic concepts will help you understand the manifest that we are going to see.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3 id=\"let-s-get-started\"\u003eLet\u0026rsquo;s get started\u003c/h3\u003e\n\n\u003cp\u003eWe already have the bookinfo project deployed and using all three versions of the service (ratings) but we will need to make some changes to test route based on user identity, you can check the configuration with:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl get destinationrules -o yaml\napiVersion: v1\nitems:\n- apiVersion: networking.istio.io/v1alpha3\n  kind: DestinationRule\n  metadata:\n    annotations:\n      kubectl.kubernetes.io/last-applied-configuration: \u003cspan style=\"color:#e6db74\"\u003e|\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e        {\u0026#34;apiVersion\u0026#34;:\u0026#34;networking.istio.io/v1alpha3\u0026#34;,\u0026#34;kind\u0026#34;:\u0026#34;DestinationRule\u0026#34;,\u0026#34;metadata\u0026#34;:{\u0026#34;annotations\u0026#34;:{},\u0026#34;name\u0026#34;:\u0026#34;details\u0026#34;,\u0026#34;namespace\u0026#34;:\u0026#34;default\u0026#34;},\u0026#34;spec\u0026#34;:{\u0026#34;host\u0026#34;:\u0026#34;details\u0026#34;,\u0026#34;subsets\u0026#34;:[{\u0026#34;labels\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;v1\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;v1\u0026#34;},{\u0026#34;labels\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;v2\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;v2\u0026#34;}]}}\u003c/span\u003e\n    creationTimestamp: \u003cspan style=\"color:#e6db74\"\u003e2019-01-11T00:58:54Z\u003c/span\u003e\n    generation: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n    name: details\n    namespace: default\n    resourceVersion: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;921688\u0026#34;\u003c/span\u003e\n    selfLink: /apis/networking.istio.io/v1alpha3/namespaces/default/destinationrules/details\n    uid: \u003cspan style=\"color:#ae81ff\"\u003e11490656\u003c/span\u003e-153c-\u003cspan style=\"color:#ae81ff\"\u003e11e9\u003c/span\u003e-9eda-6a85233ec1d5\n  spec:\n    host: details\n    subsets:\n    - labels:\n        version: v1\n      name: v1\n    - labels:\n        version: v2\n      name: v2\n- apiVersion: networking.istio.io/v1alpha3\n  kind: DestinationRule\n  metadata:\n    annotations:\n      kubectl.kubernetes.io/last-applied-configuration: \u003cspan style=\"color:#e6db74\"\u003e|\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e        {\u0026#34;apiVersion\u0026#34;:\u0026#34;networking.istio.io/v1alpha3\u0026#34;,\u0026#34;kind\u0026#34;:\u0026#34;DestinationRule\u0026#34;,\u0026#34;metadata\u0026#34;:{\u0026#34;annotations\u0026#34;:{},\u0026#34;name\u0026#34;:\u0026#34;productpage\u0026#34;,\u0026#34;namespace\u0026#34;:\u0026#34;default\u0026#34;},\u0026#34;spec\u0026#34;:{\u0026#34;host\u0026#34;:\u0026#34;productpage\u0026#34;,\u0026#34;subsets\u0026#34;:[{\u0026#34;labels\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;v1\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;v1\u0026#34;}]}}\u003c/span\u003e\n    creationTimestamp: \u003cspan style=\"color:#e6db74\"\u003e2019-01-11T00:58:53Z\u003c/span\u003e\n    generation: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n    name: productpage\n    namespace: default\n    resourceVersion: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;921684\u0026#34;\u003c/span\u003e\n    selfLink: /apis/networking.istio.io/v1alpha3/namespaces/default/destinationrules/productpage\n    uid: 10a42a24-153c-\u003cspan style=\"color:#ae81ff\"\u003e11e9\u003c/span\u003e-9eda-6a85233ec1d5\n  spec:\n    host: productpage\n    subsets:\n    - labels:\n        version: v1\n      name: v1\n- apiVersion: networking.istio.io/v1alpha3\n  kind: DestinationRule\n  metadata:\n    annotations:\n      kubectl.kubernetes.io/last-applied-configuration: \u003cspan style=\"color:#e6db74\"\u003e|\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e        {\u0026#34;apiVersion\u0026#34;:\u0026#34;networking.istio.io/v1alpha3\u0026#34;,\u0026#34;kind\u0026#34;:\u0026#34;DestinationRule\u0026#34;,\u0026#34;metadata\u0026#34;:{\u0026#34;annotations\u0026#34;:{},\u0026#34;name\u0026#34;:\u0026#34;ratings\u0026#34;,\u0026#34;namespace\u0026#34;:\u0026#34;default\u0026#34;},\u0026#34;spec\u0026#34;:{\u0026#34;host\u0026#34;:\u0026#34;ratings\u0026#34;,\u0026#34;subsets\u0026#34;:[{\u0026#34;labels\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;v1\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;v1\u0026#34;},{\u0026#34;labels\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;v2\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;v2\u0026#34;},{\u0026#34;labels\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;v2-mysql\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;v2-mysql\u0026#34;},{\u0026#34;labels\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;v2-mysql-vm\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;v2-mysql-vm\u0026#34;}]}}\u003c/span\u003e\n    creationTimestamp: \u003cspan style=\"color:#e6db74\"\u003e2019-01-11T00:58:54Z\u003c/span\u003e\n    generation: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n    name: ratings\n    namespace: default\n    resourceVersion: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;921686\u0026#34;\u003c/span\u003e\n    selfLink: /apis/networking.istio.io/v1alpha3/namespaces/default/destinationrules/ratings\n    uid: \u003cspan style=\"color:#ae81ff\"\u003e111299e1\u003c/span\u003e-153c-\u003cspan style=\"color:#ae81ff\"\u003e11e9\u003c/span\u003e-9eda-6a85233ec1d5\n  spec:\n    host: ratings\n    subsets:\n    - labels:\n        version: v1\n      name: v1\n    - labels:\n        version: v2\n      name: v2\n    - labels:\n        version: v2-mysql\n      name: v2-mysql\n    - labels:\n        version: v2-mysql-vm\n      name: v2-mysql-vm\n- apiVersion: networking.istio.io/v1alpha3\n  kind: DestinationRule\n  metadata:\n    annotations:\n      kubectl.kubernetes.io/last-applied-configuration: \u003cspan style=\"color:#e6db74\"\u003e|\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e        {\u0026#34;apiVersion\u0026#34;:\u0026#34;networking.istio.io/v1alpha3\u0026#34;,\u0026#34;kind\u0026#34;:\u0026#34;DestinationRule\u0026#34;,\u0026#34;metadata\u0026#34;:{\u0026#34;annotations\u0026#34;:{},\u0026#34;name\u0026#34;:\u0026#34;reviews\u0026#34;,\u0026#34;namespace\u0026#34;:\u0026#34;default\u0026#34;},\u0026#34;spec\u0026#34;:{\u0026#34;host\u0026#34;:\u0026#34;reviews\u0026#34;,\u0026#34;subsets\u0026#34;:[{\u0026#34;labels\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;v1\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;v1\u0026#34;},{\u0026#34;labels\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;v2\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;v2\u0026#34;},{\u0026#34;labels\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;v3\u0026#34;},\u0026#34;name\u0026#34;:\u0026#34;v3\u0026#34;}]}}\u003c/span\u003e\n    creationTimestamp: \u003cspan style=\"color:#e6db74\"\u003e2019-01-11T00:58:53Z\u003c/span\u003e\n    generation: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n    name: reviews\n    namespace: default\n    resourceVersion: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;921685\u0026#34;\u003c/span\u003e\n    selfLink: /apis/networking.istio.io/v1alpha3/namespaces/default/destinationrules/reviews\n    uid: 10db9ee2-153c-\u003cspan style=\"color:#ae81ff\"\u003e11e9\u003c/span\u003e-9eda-6a85233ec1d5\n  spec:\n    host: reviews\n    subsets:\n    - labels:\n        version: v1\n      name: v1\n    - labels:\n        version: v2\n      name: v2\n    - labels:\n        version: v3\n      name: v3\nkind: List\nmetadata:\n  resourceVersion: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\n  selfLink: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nThere we have all the destination rules, and now we need to apply the new manifest that will send everything to the version 1 and the user \u003cem\u003ejason\u003c/em\u003e to the version 2 of the reviews microservice.\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eistio-\u003cspan style=\"color:#ae81ff\"\u003e1.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e/samples/bookinfo $ kubectl apply -f networking/virtual-service-reviews-test-v2.yaml\nvirtualservice.networking.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;reviews\u0026#34;\u003c/span\u003e created\n\n$ kubectl get virtualservice reviews -o yaml\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  annotations:\n    kubectl.kubernetes.io/last-applied-configuration: \u003cspan style=\"color:#e6db74\"\u003e|\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      {\u0026#34;apiVersion\u0026#34;:\u0026#34;networking.istio.io/v1alpha3\u0026#34;,\u0026#34;kind\u0026#34;:\u0026#34;VirtualService\u0026#34;,\u0026#34;metadata\u0026#34;:{\u0026#34;annotations\u0026#34;:{},\u0026#34;name\u0026#34;:\u0026#34;reviews\u0026#34;,\u0026#34;namespace\u0026#34;:\u0026#34;default\u0026#34;},\u0026#34;spec\u0026#34;:{\u0026#34;hosts\u0026#34;:[\u0026#34;reviews\u0026#34;],\u0026#34;http\u0026#34;:[{\u0026#34;match\u0026#34;:[{\u0026#34;headers\u0026#34;:{\u0026#34;end-user\u0026#34;:{\u0026#34;exact\u0026#34;:\u0026#34;jason\u0026#34;}}}],\u0026#34;route\u0026#34;:[{\u0026#34;destination\u0026#34;:{\u0026#34;host\u0026#34;:\u0026#34;reviews\u0026#34;,\u0026#34;subset\u0026#34;:\u0026#34;v2\u0026#34;}}]},{\u0026#34;route\u0026#34;:[{\u0026#34;destination\u0026#34;:{\u0026#34;host\u0026#34;:\u0026#34;reviews\u0026#34;,\u0026#34;subset\u0026#34;:\u0026#34;v1\u0026#34;}}]}]}}\u003c/span\u003e\n  creationTimestamp: \u003cspan style=\"color:#e6db74\"\u003e2019-01-11T02:30:35Z\u003c/span\u003e\n  generation: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n  name: reviews\n  namespace: default\n  resourceVersion: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;930577\u0026#34;\u003c/span\u003e\n  selfLink: /apis/networking.istio.io/v1alpha3/namespaces/default/virtualservices/reviews\n  uid: e0701f0d-\u003cspan style=\"color:#ae81ff\"\u003e1548\u003c/span\u003e-\u003cspan style=\"color:#ae81ff\"\u003e11e9\u003c/span\u003e-9eda-6a85233ec1d5\nspec:\n  hosts:\n  - reviews\n  http:\n  - match:\n    - headers:\n        end-user:\n          exact: jason\n    route:\n    - destination:\n        host: reviews\n        subset: v2\n  - route:\n    - destination:\n        host: reviews\n        subset: v1\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nWhat\u0026rsquo;s going on here, how Istio knows what user is logged in?, well, the app adds a header called end-user and value \u003cem\u003ejason\u003c/em\u003e then the route will be used, it\u0026rsquo;s a nifty trick.\u003c/p\u003e\n\n\u003cp\u003eNot jason:\n\u003cfigure\u003e\n    \u003cimg src=\"/img/istio-servicev1.png\" width=\"100%\"/\u003e \n\u003c/figure\u003e\n\u003c/p\u003e\n\n\u003cp\u003ejason:\n\u003cfigure\u003e\n    \u003cimg src=\"/img/istio-servicev2.png\" width=\"100%\"/\u003e \n\u003c/figure\u003e\n\nAs you can see the difference in the v1 and v2 of the app are the stars below the reviews, but that is more than enough to indicate that it works, this is really nice for beta testers you don\u0026rsquo;t need or have to complicate your code but just add a header.\u003c/p\u003e\n\n\u003ch3 id=\"injecting-an-http-abort-fault\"\u003eInjecting an HTTP abort fault:\u003c/h3\u003e\n\n\u003cp\u003eThis time we will inject a failure for our friend \u003cem\u003ejason\u003c/em\u003e:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eistio-\u003cspan style=\"color:#ae81ff\"\u003e1.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e/samples/bookinfo $ kubectl apply -f networking/virtual-service-ratings-test-abort.yaml\nvirtualservice.networking.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ratings\u0026#34;\u003c/span\u003e created\n\n$ kubectl get virtualservice ratings -o yaml\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  annotations:\n    kubectl.kubernetes.io/last-applied-configuration: \u003cspan style=\"color:#e6db74\"\u003e|\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      {\u0026#34;apiVersion\u0026#34;:\u0026#34;networking.istio.io/v1alpha3\u0026#34;,\u0026#34;kind\u0026#34;:\u0026#34;VirtualService\u0026#34;,\u0026#34;metadata\u0026#34;:{\u0026#34;annotations\u0026#34;:{},\u0026#34;name\u0026#34;:\u0026#34;ratings\u0026#34;,\u0026#34;namespace\u0026#34;:\u0026#34;default\u0026#34;},\u0026#34;spec\u0026#34;:{\u0026#34;hosts\u0026#34;:[\u0026#34;ratings\u0026#34;],\u0026#34;http\u0026#34;:[{\u0026#34;fault\u0026#34;:{\u0026#34;abort\u0026#34;:{\u0026#34;httpStatus\u0026#34;:500,\u0026#34;percent\u0026#34;:100}},\u0026#34;match\u0026#34;:[{\u0026#34;headers\u0026#34;:{\u0026#34;end-user\u0026#34;:{\u0026#34;exact\u0026#34;:\u0026#34;jason\u0026#34;}}}],\u0026#34;route\u0026#34;:[{\u0026#34;destination\u0026#34;:{\u0026#34;host\u0026#34;:\u0026#34;ratings\u0026#34;,\u0026#34;subset\u0026#34;:\u0026#34;v1\u0026#34;}}]},{\u0026#34;route\u0026#34;:[{\u0026#34;destination\u0026#34;:{\u0026#34;host\u0026#34;:\u0026#34;ratings\u0026#34;,\u0026#34;subset\u0026#34;:\u0026#34;v1\u0026#34;}}]}]}}\u003c/span\u003e\n  creationTimestamp: \u003cspan style=\"color:#e6db74\"\u003e2019-01-11T02:50:59Z\u003c/span\u003e\n  generation: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n  name: ratings\n  namespace: default\n  resourceVersion: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;932552\u0026#34;\u003c/span\u003e\n  selfLink: /apis/networking.istio.io/v1alpha3/namespaces/default/virtualservices/ratings\n  uid: b98799b0-154b-\u003cspan style=\"color:#ae81ff\"\u003e11e9\u003c/span\u003e-9eda-6a85233ec1d5\nspec:\n  hosts:\n  - ratings\n  http:\n  - fault:\n      abort:\n        httpStatus: \u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e\n        percent: \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e\n    match:\n    - headers:\n        end-user:\n          exact: jason\n    route:\n    - destination:\n        host: ratings\n        subset: v1\n  - route:\n    - destination:\n        host: ratings\n        subset: v1\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eSo he decided to check the book reviews again and boom, the ratings service was not available but everything else works just fine, this only applies for \u003cem\u003ejason\u003c/em\u003e everyone else will see the version without stars or the error message.\n\u003cfigure\u003e\n    \u003cimg src=\"/img/istio-servicev3.png\" width=\"100%\"/\u003e \n\u003c/figure\u003e\n\u003c/p\u003e\n\n\u003ch3 id=\"notes\"\u003eNotes\u003c/h3\u003e\n\n\u003cp\u003eIstio seems an it is indeed really powerful, there many more features like:\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eTraffic shifting.\u003c/li\u003e\n\u003cli\u003eRequests timeouts.\u003c/li\u003e\n\u003cli\u003eCircuit breaking.\u003c/li\u003e\n\u003cli\u003eMirroring.\u003c/li\u003e\n\u003cli\u003eAnd a lot more.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eI left aside Policies, Telemetry and Security, if you want to learn more about Istio I highly recommend you to try the examples yourself and read on the \u003ca href=\"https://istio.io/docs/tasks/traffic-management/#collapse24\"\u003eofficial documentation\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eI also spent some time improving the navigation of the blog and some other minor details, but I wanted to keep the articles going so that\u0026rsquo;s why this one is so simple and similar to the documentation.\u003c/p\u003e\n\n\u003ch3 id=\"upcoming-topics-and-ideas\"\u003eUpcoming topics and ideas\u003c/h3\u003e\n\n\u003cp\u003eI Want to start creating series of content on different topics, brief articles that can get you started with some new technology or maybe give you an idea of how it works, let me know if you are interested in that kind of content in the comments or via twitter 🐦 (it\u0026rsquo;s a bird, in case you cannot see unicode characters).\u003c/p\u003e\n\n\u003ch3 id=\"errata\"\u003eErrata\u003c/h3\u003e\n\n\u003cp\u003eIf you spot any error or have any suggestion, please send me a message so it gets fixed.\u003c/p\u003e\n\n\u003cp\u003eAlso, you can check the source code and changes in the \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003egenerated code\u003c/a\u003e and the \u003ca href=\"https://github.com/kainlite/blog\"\u003esources here\u003c/a\u003e\u003c/p\u003e\n"
    }, 
    {
      "id": "https://kainlite.github.io/blog/why_do_i_need_a_service_mesh/",
      "url": "https://kainlite.github.io/blog/why_do_i_need_a_service_mesh/",
      "title": "Why do I need a service mesh?",
      "date_published": "2019-01-06T00:00:00Z",
      "content_html": "\n\n\u003ch3 id=\"introduction\"\u003eIntroduction\u003c/h3\u003e\n\n\u003cp\u003eThis time we will see how to get started with \u003ca href=\"https://istio.io/\"\u003eIstio\u003c/a\u003e and why do we need to use a service mesh.\u003c/p\u003e\n\n\u003cp\u003eIn this example I will be using \u003ca href=\"https://m.do.co/c/01d040b789de\"\u003eDigital Ocean\u003c/a\u003e (that\u0026rsquo;s my referral link), note that I do not have any association with Digital Ocean but they give you $100 to test their products for 60 days, if you spend $25 I get another $25.\u003c/p\u003e\n\n\u003ch3 id=\"istio\"\u003eIstio\u003c/h3\u003e\n\n\u003cp\u003eSo\u0026hellip; You might be wondering some of those questions: why Istio? Why do I need a service mesh?, when do I need that? And I want to help you with some answers:\u003c/p\u003e\n\n\u003cp\u003eWhy do I need a service mesh? Basically because in cloud environments you cannot trust that the network will be reliable 100% of the time, that the latency will be low, that the network is secure and the bandwidth is infinite, the service mesh is just an extra layer to help microservices communicate with each other safely and reliably.\u003c/p\u003e\n\n\u003cp\u003eWhen do I need to have one? This one can be tricky and will depend on your environment, but the moment that you start experiencing network issues between your microservices would be a good moment to do it, it could be done before of course, but it will highly depend on the project, if you can start early with it the better and easier to implement will be, always have in mind the benefits of added security, observability and likely performance improvement.\u003c/p\u003e\n\n\u003cp\u003eWhy Istio? This will be a small series of service meshes for kubernetes and I decided to start with Istio.\u003c/p\u003e\n\n\u003cp\u003eIn case you don\u0026rsquo;t agree with my explanations that\u0026rsquo;s ok, this is a TL;DR version and also I simplified things a lot, for a more complete overview you can check \u003ca href=\"https://blog.buoyant.io/2017/04/25/whats-a-service-mesh-and-why-do-i-need-one/\"\u003ethis\u003c/a\u003e article or \u003ca href=\"https://www.oreilly.com/ideas/do-you-need-a-service-mesh\"\u003ethis one\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch3 id=\"let-s-get-started\"\u003eLet\u0026rsquo;s get started\u003c/h3\u003e\n\n\u003cp\u003eFirst of all we need to download and install Istio in our cluster, the recommended way of doing it is using helm (In this case I will be using the no Tiller alternative, but it could be done with helm install as well, check here for \u003ca href=\"https://istio.io/docs/setup/kubernetes/helm-install/\"\u003emore info\u003c/a\u003e):\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ curl -L https://git.io/getLatestIstio \u003cspan style=\"color:#e6db74\"\u003e| sh -\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nThis will download and extract the latest release, in this case 1.0.5 at this moment.\u003c/p\u003e\n\n\u003cp\u003eSo let\u0026rsquo;s install Istio\u0026hellip; only pay attention to the first 3 commands, then you can skip until the end of the code block, I post all the output because I like full examples :)\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eistio-\u003cspan style=\"color:#ae81ff\"\u003e1.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e $ helm template install/kubernetes/helm/istio --name istio --namespace istio-system --set grafana.enabled=\u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026gt; $HOME/istio.yaml\u003c/span\u003e\nistio-\u003cspan style=\"color:#ae81ff\"\u003e1.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e $ kubectl create namespace istio-system\nnamespace \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-system\u0026#34;\u003c/span\u003e created\n\nistio-\u003cspan style=\"color:#ae81ff\"\u003e1.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e $ kubectl apply -f $HOME/istio.yaml\nconfigmap \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-galley-configuration\u0026#34;\u003c/span\u003e created\nconfigmap \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-statsd-prom-bridge\u0026#34;\u003c/span\u003e created\nconfigmap \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;prometheus\u0026#34;\u003c/span\u003e created\nconfigmap \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-security-custom-resources\u0026#34;\u003c/span\u003e created\nconfigmap \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio\u0026#34;\u003c/span\u003e created\nconfigmap \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-sidecar-injector\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-galley-service-account\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-egressgateway-service-account\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-ingressgateway-service-account\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-mixer-service-account\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-pilot-service-account\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;prometheus\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-cleanup-secrets-service-account\u0026#34;\u003c/span\u003e created\nclusterrole.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-cleanup-secrets-istio-system\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-cleanup-secrets-istio-system\u0026#34;\u003c/span\u003e created\njob.batch \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-cleanup-secrets\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-security-post-install-account\u0026#34;\u003c/span\u003e created\nclusterrole.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-security-post-install-istio-system\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-security-post-install-role-binding-istio-system\u0026#34;\u003c/span\u003e created\njob.batch \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-security-post-install\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-citadel-service-account\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-sidecar-injector-service-account\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;virtualservices.networking.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;destinationrules.networking.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;serviceentries.networking.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gateways.networking.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;envoyfilters.networking.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;httpapispecbindings.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;httpapispecs.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;quotaspecbindings.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;quotaspecs.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;rules.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;attributemanifests.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;bypasses.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;circonuses.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;deniers.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fluentds.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;kubernetesenvs.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;listcheckers.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;memquotas.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;noops.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;opas.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;prometheuses.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;rbacs.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;redisquotas.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;servicecontrols.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;signalfxs.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;solarwindses.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;stackdrivers.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;statsds.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;stdios.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apikeys.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;authorizations.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;checknothings.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;kuberneteses.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;listentries.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;logentries.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;edges.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;metrics.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;quotas.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;reportnothings.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;servicecontrolreports.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tracespans.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;rbacconfigs.rbac.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;serviceroles.rbac.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;servicerolebindings.rbac.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;adapters.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;instances.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;templates.config.istio.io\u0026#34;\u003c/span\u003e created\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;handlers.config.istio.io\u0026#34;\u003c/span\u003e created\nclusterrole.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-galley-istio-system\u0026#34;\u003c/span\u003e created\nclusterrole.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-egressgateway-istio-system\u0026#34;\u003c/span\u003e created\nclusterrole.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-ingressgateway-istio-system\u0026#34;\u003c/span\u003e created\nclusterrole.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-mixer-istio-system\u0026#34;\u003c/span\u003e created\nclusterrole.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-pilot-istio-system\u0026#34;\u003c/span\u003e created\nclusterrole.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;prometheus-istio-system\u0026#34;\u003c/span\u003e created\nclusterrole.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-citadel-istio-system\u0026#34;\u003c/span\u003e created\nclusterrole.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-sidecar-injector-istio-system\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-galley-admin-role-binding-istio-system\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-egressgateway-istio-system\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-ingressgateway-istio-system\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-mixer-admin-role-binding-istio-system\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-pilot-istio-system\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;prometheus-istio-system\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-citadel-istio-system\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-sidecar-injector-admin-role-binding-istio-system\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-galley\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-egressgateway\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-ingressgateway\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-policy\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-telemetry\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-pilot\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;prometheus\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-citadel\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-sidecar-injector\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-galley\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-egressgateway\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-ingressgateway\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-policy\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-telemetry\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-pilot\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;prometheus\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-citadel\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-sidecar-injector\u0026#34;\u003c/span\u003e created\ngateway.networking.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-autogenerated-k8s-ingress\u0026#34;\u003c/span\u003e created\nhorizontalpodautoscaler.autoscaling \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-egressgateway\u0026#34;\u003c/span\u003e created\nhorizontalpodautoscaler.autoscaling \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-ingressgateway\u0026#34;\u003c/span\u003e created\nhorizontalpodautoscaler.autoscaling \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-policy\u0026#34;\u003c/span\u003e created\nhorizontalpodautoscaler.autoscaling \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-telemetry\u0026#34;\u003c/span\u003e created\nhorizontalpodautoscaler.autoscaling \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-pilot\u0026#34;\u003c/span\u003e created\nmutatingwebhookconfiguration.admissionregistration.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-sidecar-injector\u0026#34;\u003c/span\u003e created\nattributemanifest.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istioproxy\u0026#34;\u003c/span\u003e created\nattributemanifest.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;kubernetes\u0026#34;\u003c/span\u003e created\nstdio.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;handler\u0026#34;\u003c/span\u003e created\nlogentry.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;accesslog\u0026#34;\u003c/span\u003e created\nlogentry.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tcpaccesslog\u0026#34;\u003c/span\u003e created\nrule.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;stdio\u0026#34;\u003c/span\u003e created\nrule.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;stdiotcp\u0026#34;\u003c/span\u003e created\nmetric.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;requestcount\u0026#34;\u003c/span\u003e created\nmetric.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;requestduration\u0026#34;\u003c/span\u003e created\nmetric.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;requestsize\u0026#34;\u003c/span\u003e created\nmetric.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;responsesize\u0026#34;\u003c/span\u003e created\nmetric.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tcpbytesent\u0026#34;\u003c/span\u003e created\nmetric.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tcpbytereceived\u0026#34;\u003c/span\u003e created\nprometheus.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;handler\u0026#34;\u003c/span\u003e created\nrule.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;promhttp\u0026#34;\u003c/span\u003e created\nrule.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;promtcp\u0026#34;\u003c/span\u003e created\nkubernetesenv.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;handler\u0026#34;\u003c/span\u003e created\nrule.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;kubeattrgenrulerule\u0026#34;\u003c/span\u003e created\nrule.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tcpkubeattrgenrulerule\u0026#34;\u003c/span\u003e created\nkubernetes.config.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;attributes\u0026#34;\u003c/span\u003e created\ndestinationrule.networking.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-policy\u0026#34;\u003c/span\u003e created\ndestinationrule.networking.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;istio-telemetry\u0026#34;\u003c/span\u003e created\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nWOAH, What did just happen?, a lot of new resources were created, basically we just generated the manifest from the helm chart and applied that to our cluster.\u003c/p\u003e\n\n\u003cp\u003eSo lets see what\u0026rsquo;s running and what that means:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl get pods -n istio-system\nNAME                                      READY     STATUS      RESTARTS   AGE\nistio-citadel-856f994c58-l96p8            \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m\nistio-cleanup-secrets-xqqj4               \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Completed   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m\nistio-egressgateway-5649fcf57-7zwkh       \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m\nistio-galley-7665f65c9c-tzn7d             \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m\nistio-ingressgateway-6755b9bbf6-bh84r     \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m\nistio-pilot-56855d999b-c4cp5              \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e       Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m\nistio-policy-6fcb6d655f-9544z             \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e       Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m\nistio-sidecar-injector-768c79f7bf-th8zh   \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m\nistio-telemetry-664d896cf5-jdcwv          \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e       Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m\nprometheus-76b7745b64-f8jxn               \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nA few minutes later, almost everything is up, but what\u0026rsquo;s all that? Istio has several components, see the following overview extracted from \u003ca href=\"https://github.com/istio/istio\"\u003egithub\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eEnvoy\u003c/strong\u003e: Sidecar proxies per microservice to handle ingress/egress traffic between services in the cluster and from a service to external services. The proxies form a secure microservice mesh providing a rich set of functions like discovery, rich layer-7 routing, circuit breakers, policy enforcement and telemetry recording/reporting functions.\nNote: The service mesh is not an overlay network. It simplifies and enhances how microservices in an application talk to each other over the network provided by the underlying platform.\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eMixer\u003c/strong\u003e: Central component that is leveraged by the proxies and microservices to enforce policies such as authorization, rate limits, quotas, authentication, request tracing and telemetry collection.\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003ePilot\u003c/strong\u003e: A component responsible for configuring the proxies at runtime.\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eCitadel\u003c/strong\u003e: A centralized component responsible for certificate issuance and rotation.\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eNode Agent\u003c/strong\u003e: A per-node component responsible for certificate issuance and rotation.\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eGalley\u003c/strong\u003e: Central component for validating, ingesting, aggregating, transforming and distributing config within Istio.\u003c/p\u003e\n\n\u003cp\u003eOk so, a lot of new things were installed but how do I know it\u0026rsquo;s working? let\u0026rsquo;s deploy a \u003ca href=\"https://istio.io/docs/examples/bookinfo/\"\u003etest application\u003c/a\u003e and check it:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ export PATH=\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;$PATH:~/istio-1.0.5/bin\u0026#34;\u003c/span\u003e\nistio-\u003cspan style=\"color:#ae81ff\"\u003e1.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e/samples/bookinfo $ kubectl apply -f \u0026lt;(istioctl kube-inject -f platform/kube/bookinfo.yaml)\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;details\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;details-v1\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ratings\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ratings-v1\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;reviews\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;reviews-v1\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;reviews-v2\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;reviews-v3\u0026#34;\u003c/span\u003e created\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;productpage\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;productpage-v1\u0026#34;\u003c/span\u003e created\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nThat command not only deployed the application but injected the Istio sidecar to each pod:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl get pods\nNAME                              READY     STATUS    RESTARTS   AGE\ndetails-v1-8bd954dbb-zhrqq        \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e       Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m\nproductpage-v1-849c786f96-kpfx9   \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e       Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m\nratings-v1-68d648d6fd-w68qb       \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e       Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m\nreviews-v1-b4c984bdc-9s6j5        \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e       Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m\nreviews-v2-575446d5db-r6kwc       \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e       Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m\nreviews-v3-74458c4889-kr4wb       \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e       Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAs we can see each pod has 2 containers in it, the app container and istio-proxy. You can also configure \u003ca href=\"https://istio.io/docs/setup/kubernetes/sidecar-injection/#automatic-sidecar-injection\"\u003eautomatic sidecar injection\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eAlso all services are running:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl get services\nNAME          TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE\ndetails       ClusterIP   \u003cspan style=\"color:#ae81ff\"\u003e10.245\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e134.179\u003c/span\u003e   \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;        9080/TCP   3m\u003c/span\u003e\nkubernetes    ClusterIP   \u003cspan style=\"color:#ae81ff\"\u003e10.245\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e       \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;        443/TCP    3d\u003c/span\u003e\nproductpage   ClusterIP   \u003cspan style=\"color:#ae81ff\"\u003e10.245\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e32.221\u003c/span\u003e    \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;        9080/TCP   3m\u003c/span\u003e\nratings       ClusterIP   \u003cspan style=\"color:#ae81ff\"\u003e10.245\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e159.112\u003c/span\u003e   \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;        9080/TCP   3m\u003c/span\u003e\nreviews       ClusterIP   \u003cspan style=\"color:#ae81ff\"\u003e10.245\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e77.125\u003c/span\u003e    \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;        9080/TCP   3m\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eBut how do I access the app?\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eistio-\u003cspan style=\"color:#ae81ff\"\u003e1.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e/samples/bookinfo $ kubectl apply -f networking/bookinfo-gateway.yaml\ngateway.networking.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;bookinfo-gateway\u0026#34;\u003c/span\u003e created\nvirtualservice.networking.istio.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;bookinfo\u0026#34;\u003c/span\u003e created\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nIn Istio a Gateway configures a load balancer for HTTP/TCP traffic, most commonly operating at the edge of the mesh to enable ingress traffic for an application (L4-L6).\u003c/p\u003e\n\n\u003cp\u003eAfter that we need to set some environment variables to fetch the LB ip, port, etc.\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ export INGRESS_HOST=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath=\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{.status.loadBalancer.ingress[0].ip}\u0026#39;\u003c/span\u003e)\n$ export INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath=\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{.spec.ports[?(@.name==\u0026#34;http2\u0026#34;)].port}\u0026#39;\u003c/span\u003e)\n$ export SECURE_INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath=\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{.spec.ports[?(@.name==\u0026#34;https\u0026#34;)].port}\u0026#39;\u003c/span\u003e)\n$ export GATEWAY_URL=$INGRESS_HOST:$INGRESS_PORT\n\ncurl -o /dev/\u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e -s -w \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%{http_code}\\n\u0026#34;\u003c/span\u003e http://${GATEWAY_URL}/productpage\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nIf the latest curl returns 200 then we\u0026rsquo;re good, you can also browse the app \u003ccode\u003eopen http://${GATEWAY_URL}/productpage\u003c/code\u003e and you will see something like the following image:\n\u003cfigure\u003e\n    \u003cimg src=\"/img/productpage-example.png\" width=\"100%\"/\u003e \u003cfigcaption\u003e\n            \u003ch4\u003eProduct page example\u003c/h4\u003e\n        \u003c/figcaption\u003e\n\u003c/figure\u003e\n\u003c/p\u003e\n\n\u003cp\u003eAlso you can use \u003ca href=\"https://grafana.com/\"\u003eGrafana\u003c/a\u003e to check some metrics about the service usage, etc. (You don\u0026rsquo;t have to worry about prometheus since it\u0026rsquo;s enabled by default). Spin up the port-forward so we don\u0026rsquo;t have to expose grafana: to the world with: \u003ccode\u003ekubectl -n istio-system port-forward $(kubectl -n istio-system get pod -l app=grafana -o jsonpath='{.items[0].metadata.name}') 3000:3000\u003c/code\u003e, and then \u003ccode\u003eopen http://localhost:3000\u003c/code\u003e.\u003c/p\u003e\n\n\u003cp\u003eAs a general advice check all the settings that Istio offers try the ones that you think that could be useful for your project and always measure and compare.\u003c/p\u003e\n\n\u003ch3 id=\"notes\"\u003eNotes\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eDo mind that \u003cstrong\u003epilot\u003c/strong\u003e pod requires at least 4 Gbs of memory, so you will need at least one node with that amount of memory.\u003c/li\u003e\n\u003cli\u003eYou can check the load balancer status under: Manage -\u0026gt; Networking -\u0026gt; Load balancers. And if everything is okay your LB will say Healthy.\u003c/li\u003e\n\u003cli\u003eGrafana is not enabled by default but we do enable it via helm with \u003ccode\u003e--set grafana.enabled=true\u003c/code\u003e, if you want to check all the possible options \u003ca href=\"https://istio.io/docs/reference/config/installation-options/\"\u003ego here\u003c/a\u003e, if you are using more than two \u003ccode\u003e--set\u003c/code\u003e options I would recommend creating a \u003ccode\u003evalues.yaml\u003c/code\u003e file and use that instead.\u003c/li\u003e\n\u003cli\u003eIstio is a big beast and should be treated carefully, there is a lot more to learn and test out. We only scratched the surface here.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3 id=\"upcoming-posts\"\u003eUpcoming posts\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eMore examples using Istio.\u003c/li\u003e\n\u003cli\u003eLinkerd.\u003c/li\u003e\n\u003cli\u003eMaybe some Golang fun.\u003c/li\u003e\n\u003cli\u003eServerless or kubeless, that\u0026rsquo;s the question.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3 id=\"errata\"\u003eErrata\u003c/h3\u003e\n\n\u003cp\u003eIf you spot any error or have any suggestion, please send me a message so it gets fixed.\u003c/p\u003e\n\n\u003cp\u003eAlso, you can check the source code and changes in the \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003egenerated code\u003c/a\u003e and the \u003ca href=\"https://github.com/kainlite/blog\"\u003esources here\u003c/a\u003e\u003c/p\u003e\n"
    }, 
    {
      "id": "https://kainlite.github.io/blog/getting_started_with_skaffold/",
      "url": "https://kainlite.github.io/blog/getting_started_with_skaffold/",
      "title": "Getting started with skaffold",
      "date_published": "2019-01-03T00:00:00Z",
      "content_html": "\n\n\u003ch3 id=\"skaffold\"\u003e\u003cstrong\u003eSkaffold\u003c/strong\u003e\u003c/h3\u003e\n\n\u003cp\u003eThis time we will see how to get started with \u003ca href=\"https://github.com/GoogleContainerTools/skaffold\"\u003eSkaffold\u003c/a\u003e, it seems a relatively mature project, and it does a lot more than some of the previous explored alternatives: \u003cem\u003eSkaffold is a command line tool that facilitates continuous development for Kubernetes applications. You can iterate on your application source code locally then deploy to local or remote Kubernetes clusters. Skaffold handles the workflow for building, pushing and deploying your application. It also provides building blocks and describe customizations for a CI/CD pipeline.\u003c/em\u003e (Extracted from \u003ca href=\"https://github.com/GoogleContainerTools/skaffold\"\u003egithub\u003c/a\u003e)\u003c/p\u003e\n\n\u003cp\u003eIn this example I will be using \u003ca href=\"https://m.do.co/c/01d040b789de\"\u003eDigital Ocean\u003c/a\u003e (that\u0026rsquo;s my referral link), note that I do not have any association with Digital Ocean but they give you $100 to test their products for 60 days, if you spend $25 I get another $25, I got the idea from \u003ca href=\"https://www.youtube.com/watch?v=fhYSKEy0s8w\"\u003ePelado Nerd Spanish Youtube Channel\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch3 id=\"let-s-get-started\"\u003eLet\u0026rsquo;s get started\u003c/h3\u003e\n\n\u003cp\u003eOnce you have created your account and added your credit card you will get the $100 of free credit, then you will have to go to Manage on the left side panel and click on Kubernetes, then create your cluster with the amount of nodes that you consider necessary but remember to power them off or delete these resources so you don\u0026rsquo;t waste the free credit or your credit card itself. Once you have created your cluster and downloaded the kubectl config you\u0026rsquo;re ready to go.\u003c/p\u003e\n\n\u003cp\u003eWe will be working with the chat bot again you can see the original \u003ca href=\"https://kainlite.github.io/blog/go_echobot/\"\u003earticle here\u003c/a\u003e, and the repo \u003ca href=\"https://github.com/kainlite/echobot/tree/skaffold\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s tell our kubectl to use our recently downloaded config:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ export KUBECONFIG=/home/kainlite/Downloads/k8s-\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e-\u003cspan style=\"color:#ae81ff\"\u003e13\u003c/span\u003e-\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e-do-\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e-nyc1-\u003cspan style=\"color:#ae81ff\"\u003e1546545313076\u003c/span\u003e-kubeconfig.yaml\n$ kubectl get nodes -o wide\n\nNAME                 STATUS    ROLES     AGE       VERSION   EXTERNAL-IP       OS-IMAGE                       KERNEL-VERSION   CONTAINER-RUNTIME\ncrazy-wozniak-\u003cspan style=\"color:#ae81ff\"\u003e8306\u003c/span\u003e   Ready     \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;    6h        v1.13.1   178.128.154.205   Debian GNU/Linux 9 (stretch)   4.9.0-8-amd64    docker://18.9.0\u003c/span\u003e\ncrazy-wozniak-830t   Ready     \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;    6h        v1.13.1   167.99.224.115    Debian GNU/Linux 9 (stretch)   4.9.0-8-amd64    docker://18.9.0\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nYour config might have a slightly different name, but it should be similar. We can see in the output a lot of information about our nodes (workers).\u003c/p\u003e\n\n\u003cp\u003eBut let\u0026rsquo;s cut to the chase, we are here for \u003cem\u003eSkaffold\u003c/em\u003e:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003ecurl -Lo skaffold https://storage.googleapis.com/skaffold/releases/v0.\u003cspan style=\"color:#ae81ff\"\u003e20.0\u003c/span\u003e/skaffold-linux-amd64 \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e chmod +x skaffold \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e sudo mv skaffold /usr/local/bin\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nYou can install the binary using the provided line (linux) or downloading it from the \u003ca href=\"https://github.com/GoogleContainerTools/skaffold/releases\"\u003ereleases page\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eOnce installed we can see the \u003ca href=\"https://github.com/GoogleContainerTools/skaffold/tree/master/examples\"\u003eexamples\u003c/a\u003e, I will be using the getting-started example:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eapiVersion: skaffold/v1beta2\nkind: Config\nbuild:\n  artifacts:\n  - image: kainlite/echobot\ndeploy:\n  kubectl:\n    manifests:\n      - k8s-*\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nWith very litle YAML we can accomplish a lot.\u003c/p\u003e\n\n\u003cp\u003eWe need a manifest file that matches that pattern so skaffold can deploy/re-deploy our application, so let\u0026rsquo;s generate one with \u003ccode\u003ekubectl run echobot --image=kainlite/echobot --dry-run -o yaml\u003c/code\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eapiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  labels:\n    run: echobot\n  name: echobot\nspec:\n  replicas: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n  selector:\n    matchLabels:\n      run: echobot\n  strategy: {}\n  template:\n    metadata:\n      labels:\n        run: echobot\n    spec:\n      containers:\n      - image: kainlite/echobot\n        name: echobot\n        env:\n        - name: SLACK_API_TOKEN\n          value: really_long_token\n        livenessProbe:\n          exec:\n            command:\n            - \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/bin/sh\u0026#39;\u003c/span\u003e\n            - \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;-c\u0026#39;\u003c/span\u003e\n            - \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/app/health_check.sh\u0026#39;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nThe above command can be used to generate any kind of k8s resource :), I stripped it a bit, because there were fields that I didn\u0026rsquo;t want in and added some that we need for it to work.\u003c/p\u003e\n\n\u003cp\u003eThen the only thing left to do is testing that everything works properly:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ skaffold build\n\nStarting build...\nBuilding [kainlite/echobot]...\nSending build context to Docker daemon  \u003cspan style=\"color:#ae81ff\"\u003e66.\u003c/span\u003e56kB\nStep \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : FROM golang:\u003cspan style=\"color:#ae81ff\"\u003e1.11\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e-alpine as builder\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 57915f96905a\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : WORKDIR /app\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; e04488a7f16b\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : RUN adduser -D -g \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;app\u0026#39;\u003c/span\u003e app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e     chown -R app:app /app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e     apk add git \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e apk add gcc musl-dev\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Running in 1339601fff6f\u003c/span\u003e\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.\u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.\u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e/community/x86_64/APKINDEX.tar.gz\n(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e) Installing nghttp2-libs (\u003cspan style=\"color:#ae81ff\"\u003e1.32\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e-r0)\n(\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e) Installing libssh2 (\u003cspan style=\"color:#ae81ff\"\u003e1.8\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e-r3)\n(\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e) Installing libcurl (\u003cspan style=\"color:#ae81ff\"\u003e7.61\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e-r1)\n(\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e) Installing expat (\u003cspan style=\"color:#ae81ff\"\u003e2.2\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e-r0)\n(\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e) Installing pcre2 (\u003cspan style=\"color:#ae81ff\"\u003e10.31\u003c/span\u003e-r0)\n(\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e) Installing git (\u003cspan style=\"color:#ae81ff\"\u003e2.18\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e-r0)\nExecuting busybox-\u003cspan style=\"color:#ae81ff\"\u003e1.28\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e-r1.trigger\nOK: \u003cspan style=\"color:#ae81ff\"\u003e19\u003c/span\u003e MiB in \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e packages\n(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing binutils (\u003cspan style=\"color:#ae81ff\"\u003e2.30\u003c/span\u003e-r5)\n(\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing gmp (\u003cspan style=\"color:#ae81ff\"\u003e6.1\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e-r1)\n(\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing isl (\u003cspan style=\"color:#ae81ff\"\u003e0.18\u003c/span\u003e-r0)\n(\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing libgomp (\u003cspan style=\"color:#ae81ff\"\u003e6.4\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e-r9)\n(\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing libatomic (\u003cspan style=\"color:#ae81ff\"\u003e6.4\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e-r9)\n(\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing pkgconf (\u003cspan style=\"color:#ae81ff\"\u003e1.5\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e-r0)\n(\u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing libgcc (\u003cspan style=\"color:#ae81ff\"\u003e6.4\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e-r9)\n(\u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing mpfr3 (\u003cspan style=\"color:#ae81ff\"\u003e3.1\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e-r1)\n(\u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing mpc1 (\u003cspan style=\"color:#ae81ff\"\u003e1.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e-r1)\n(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing libstdc++ (\u003cspan style=\"color:#ae81ff\"\u003e6.4\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e-r9)\n(\u003cspan style=\"color:#ae81ff\"\u003e11\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing gcc (\u003cspan style=\"color:#ae81ff\"\u003e6.4\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e-r9)\n(\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e) Installing musl-dev (\u003cspan style=\"color:#ae81ff\"\u003e1.1\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e19\u003c/span\u003e-r10)\nExecuting busybox-\u003cspan style=\"color:#ae81ff\"\u003e1.28\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e-r1.trigger\nOK: \u003cspan style=\"color:#ae81ff\"\u003e113\u003c/span\u003e MiB in \u003cspan style=\"color:#ae81ff\"\u003e32\u003c/span\u003e packages\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 0e7a97e577dc\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : ADD . /app/\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 72cfd4dea99b\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : RUN go get -d -v ./... \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e go build -o main . \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e chown -R app:app /app /home/app\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Running in 4482bfd3e8f7\u003c/span\u003e\ngo: finding github.com/gorilla/websocket v1.\u003cspan style=\"color:#ae81ff\"\u003e4.0\u003c/span\u003e\ngo: finding github.com/nlopes/slack v0.\u003cspan style=\"color:#ae81ff\"\u003e4.0\u003c/span\u003e\ngo: finding github.com/pkg/errors v0.\u003cspan style=\"color:#ae81ff\"\u003e8.0\u003c/span\u003e\ngo: downloading github.com/nlopes/slack v0.\u003cspan style=\"color:#ae81ff\"\u003e4.0\u003c/span\u003e\ngo: downloading github.com/pkg/errors v0.\u003cspan style=\"color:#ae81ff\"\u003e8.0\u003c/span\u003e\ngo: downloading github.com/gorilla/websocket v1.\u003cspan style=\"color:#ae81ff\"\u003e4.0\u003c/span\u003e\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 8ea604c7fb37\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : FROM golang:\u003cspan style=\"color:#ae81ff\"\u003e1.11\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e-alpine\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 57915f96905a\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : WORKDIR /app\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; e04488a7f16b\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : RUN adduser -D -g \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;app\u0026#39;\u003c/span\u003e app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e     chown -R app:app /app\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 33b206dba7e4\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : COPY --from=builder --chown=app /app/health_check.sh /app/health_check.sh\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 34d3cd1a5bb0\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : COPY --from=builder --chown=app /app/main /app/main\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 0c3d838b25dc\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e11\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : USER app\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 95c2bf90800c\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : CMD [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/app/main\u0026#34;\u003c/span\u003e]\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 3541257ff16c\u003c/span\u003e\nSuccessfully built 3541257ff16c\nSuccessfully tagged 1fca8a8c999a8cd9b943456b70d90807:latest\nThe push refers to repository [docker.io/kainlite/echobot]\nee06a8f42495: Preparing\n12468476a0ef: Preparing\nec122f36b39d: Preparing\ne94f3271cc73: Preparing\n93391cb9fd4b: Preparing\ncb9d0f9550f6: Preparing\n93448d8c2605: Preparing\nc54f8a17910a: Preparing\ndf64d3292fd6: Preparing\ncb9d0f9550f6: Waiting\nc54f8a17910a: Waiting\n93448d8c2605: Waiting\ne94f3271cc73: Layer already exists\n93391cb9fd4b: Layer already exists\n12468476a0ef: Layer already exists\nec122f36b39d: Layer already exists\nee06a8f42495: Layer already exists\n93448d8c2605: Layer already exists\ncb9d0f9550f6: Layer already exists\ndf64d3292fd6: Layer already exists\nc54f8a17910a: Layer already exists\nfc03e3d-dirty-\u003cspan style=\"color:#ae81ff\"\u003e3541257\u003c/span\u003e: digest: sha256:99c6d3d5b226a1947e8f96c0a5f963c8e499848d271f121ad50551046a0dc7ca size: \u003cspan style=\"color:#ae81ff\"\u003e2197\u003c/span\u003e\nBuild complete in \u003cspan style=\"color:#ae81ff\"\u003e48.\u003c/span\u003e642618413s\nStarting test...\nTest complete in \u003cspan style=\"color:#ae81ff\"\u003e9.\u003c/span\u003e15µs\nkainlite/echobot -\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; kainlite/echobot:fc03e3d-dirty-3541257\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAs we can see skaffold build not only did the docker build but also tagged and pushed the image to \u003ca href=\"https://cloud.docker.com/repository/docker/kainlite/echobot/tags\"\u003edocker hub\u003c/a\u003e, which is really nice and really useful to build a CI/CD system with it.\u003c/p\u003e\n\n\u003cp\u003eBut wait, we need to deploy that to our cluster, right on:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ skaffold deploy\nStarting build...\nBuilding [kainlite/echobot]...\nSending build context to Docker daemon  \u003cspan style=\"color:#ae81ff\"\u003e66.\u003c/span\u003e56kB\nStep \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : FROM golang:\u003cspan style=\"color:#ae81ff\"\u003e1.11\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e-alpine as builder\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 57915f96905a\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : WORKDIR /app\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; e04488a7f16b\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : RUN adduser -D -g \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;app\u0026#39;\u003c/span\u003e app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e     chown -R app:app /app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e     apk add git \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e apk add gcc musl-dev\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 0e7a97e577dc\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : ADD . /app/\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 72cfd4dea99b\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : RUN go get -d -v ./... \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e go build -o main . \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e chown -R app:app /app /home/app\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 8ea604c7fb37\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : FROM golang:\u003cspan style=\"color:#ae81ff\"\u003e1.11\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e-alpine\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 57915f96905a\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : WORKDIR /app\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; e04488a7f16b\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : RUN adduser -D -g \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;app\u0026#39;\u003c/span\u003e app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e     chown -R app:app /app\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 33b206dba7e4\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : COPY --from=builder --chown=app /app/health_check.sh /app/health_check.sh\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 34d3cd1a5bb0\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : COPY --from=builder --chown=app /app/main /app/main\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 0c3d838b25dc\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e11\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : USER app\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 95c2bf90800c\u003c/span\u003e\nStep \u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : CMD [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/app/main\u0026#34;\u003c/span\u003e]\n ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ---\u0026gt; 3541257ff16c\u003c/span\u003e\nSuccessfully built 3541257ff16c\nSuccessfully tagged 510226574761304cc9d64a343d5bdbff:latest\nThe push refers to repository [docker.io/kainlite/echobot]\nee06a8f42495: Preparing\n12468476a0ef: Preparing\nec122f36b39d: Preparing\ne94f3271cc73: Preparing\n93391cb9fd4b: Preparing\ncb9d0f9550f6: Preparing\n93448d8c2605: Preparing\nc54f8a17910a: Preparing\ndf64d3292fd6: Preparing\ncb9d0f9550f6: Waiting\n93448d8c2605: Waiting\nc54f8a17910a: Waiting\ndf64d3292fd6: Waiting\n12468476a0ef: Layer already exists\ne94f3271cc73: Layer already exists\ncb9d0f9550f6: Layer already exists\nec122f36b39d: Layer already exists\n93391cb9fd4b: Layer already exists\nee06a8f42495: Layer already exists\nc54f8a17910a: Layer already exists\ndf64d3292fd6: Layer already exists\n93448d8c2605: Mounted from library/golang\nfc03e3d-dirty-\u003cspan style=\"color:#ae81ff\"\u003e3541257\u003c/span\u003e: digest: sha256:99c6d3d5b226a1947e8f96c0a5f963c8e499848d271f121ad50551046a0dc7ca size: \u003cspan style=\"color:#ae81ff\"\u003e2197\u003c/span\u003e\nBuild complete in \u003cspan style=\"color:#ae81ff\"\u003e15.\u003c/span\u003e136865292s\nStarting test...\nTest complete in \u003cspan style=\"color:#ae81ff\"\u003e17.\u003c/span\u003e912µs\nStarting deploy...\nkubectl client version: \u003cspan style=\"color:#ae81ff\"\u003e1.10\u003c/span\u003e\nkubectl version \u003cspan style=\"color:#ae81ff\"\u003e1.12\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e or greater is recommended for use with skaffold\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;echobot\u0026#34;\u003c/span\u003e configured\nDeploy complete in \u003cspan style=\"color:#ae81ff\"\u003e5.\u003c/span\u003e676513226s\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nDeploy does a lot like with gitkube, it build the image, pushes it to the registry and then makes the deployment to the cluster, as you can see in there skaffold relies on kubectl and I have an old version of it.\u003c/p\u003e\n\n\u003cp\u003eAfter a few seconds we can see that our deployment has been triggered and we have a new pod being created for it.\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl get pods\nNAME                       READY     STATUS              RESTARTS   AGE\nechobot-57fdcccf76-4qwvq   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       ContainerCreating   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          5s\nechobot-6fcd78658c-njvpx   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Terminating         \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          9m\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nSkaffold also has another nice option that it\u0026rsquo;s called \u003cem\u003edev\u003c/em\u003e it watches the folder for changes and re-deploys the app so you can focus on code.\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s clean up and call it a day:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ skaffold delete\nCleaning up...\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;echobot\u0026#34;\u003c/span\u003e deleted\nCleanup complete in \u003cspan style=\"color:#ae81ff\"\u003e3.\u003c/span\u003e833219278s\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003ch3 id=\"notes\"\u003eNotes\u003c/h3\u003e\n\n\u003cp\u003eI really liked the workflow that skaffold provides, I hope that I can use it some more in the near future. And remember to shutdown the kubernetes cluster if you are using Digital Ocean so you don\u0026rsquo;t get charged by surprise later on.\u003c/p\u003e\n\n\u003ch3 id=\"errata\"\u003eErrata\u003c/h3\u003e\n\n\u003cp\u003eIf you spot any error or have any suggestion, please send me a message so it gets fixed.\u003c/p\u003e\n\n\u003cp\u003eAlso, you can check the source code and changes in the \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003egenerated code\u003c/a\u003e and the \u003ca href=\"https://github.com/kainlite/blog\"\u003esources here\u003c/a\u003e\u003c/p\u003e\n"
    }, 
    {
      "id": "https://kainlite.github.io/blog/getting_started_with_gitkube/",
      "url": "https://kainlite.github.io/blog/getting_started_with_gitkube/",
      "title": "Getting started with gitkube",
      "date_published": "2019-01-01T00:00:00Z",
      "content_html": "\n\n\u003ch3 id=\"gitkube\"\u003e\u003cstrong\u003eGitkube\u003c/strong\u003e\u003c/h3\u003e\n\n\u003cp\u003eThis time we will see how to get started with \u003ca href=\"https://gitkube.sh/\"\u003eGitkube\u003c/a\u003e, it\u0026rsquo;s a young project but it seems to work fine and it has an interesting approach compared to other alternatives, since it only relies on git and kubectl, other than that it\u0026rsquo;s just a \u003ca href=\"https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/\"\u003eCRD\u003c/a\u003e and a controller, so you end up with 2 pods in kube-system one for the controller and the other for gitkubed, gitkubed is in charge of cloning your repos and also build the docker images, it seems that the idea behind gitkube is for the daily use in a dev/test environment where you need to try your changes quickly and without hassle. You can find more \u003ca href=\"https://github.com/hasura/gitkube-example\"\u003eexamples here\u003c/a\u003e, also be sure to check their page and documentation if you like it or want to learn more.\u003c/p\u003e\n\n\u003cp\u003eIn the examples I will be using \u003ca href=\"https://kubernetes.io/docs/tasks/tools/install-minikube\"\u003eminikube\u003c/a\u003e or you can \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003echeck out this repo\u003c/a\u003e that has a good overview of minikube, once installed and started (\u003ccode\u003eminikube start\u003c/code\u003e) that command will download and configure the local environment, if you have been following the previous posts you already have minikube installed and working, \u003cem\u003ebut in this post be sure to use \u003cem\u003eminikube tunnel\u003c/em\u003e\u003c/em\u003e if you configure gitkube with a load balancer (or if you configure any service type as load balancer):\u003c/p\u003e\n\n\u003ch3 id=\"let-s-get-started\"\u003eLet\u0026rsquo;s get started\u003c/h3\u003e\n\n\u003cp\u003eWe\u0026rsquo;re going to deploy or re-deploy our echo bot one more time but this time using gitkube.\nYou can find the chat bot: \u003ca href=\"https://kainlite.github.io/blog/go_echobot/\"\u003earticle here\u003c/a\u003e, and the repo: \u003ca href=\"https://github.com/kainlite/echobot/tree/gitkube\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eFirst of all we need to install the gitkube binary in our machine and then the CRD in our kubernetes cluster:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl create -f https://storage.googleapis.com/gitkube/gitkube-setup-stable.yaml\ncustomresourcedefinition.apiextensions.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;remotes.gitkube.sh\u0026#34;\u003c/span\u003e created\nserviceaccount \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gitkube\u0026#34;\u003c/span\u003e created\nclusterrolebinding.rbac.authorization.k8s.io \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gitkube\u0026#34;\u003c/span\u003e created\nconfigmap \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gitkube-ci-conf\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gitkubed\u0026#34;\u003c/span\u003e created\ndeployment.extensions \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gitkube-controller\u0026#34;\u003c/span\u003e created\n\n$ kubectl --namespace kube-system expose deployment gitkubed --type=LoadBalancer --name=gitkubed\nservice \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gitkubed\u0026#34;\u003c/span\u003e exposed\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nNote that there are 2 ways to install gitkube into our cluster, using the manifests as displayed there or using the gitkube binary and doing \u003ccode\u003egitkube install\u003c/code\u003e.\u003c/p\u003e\n\n\u003cp\u003eTo install the gitkube binary, the easiest way is to do:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003ecurl https://raw.githubusercontent.com/hasura/gitkube/master/gimme.sh \u003cspan style=\"color:#e6db74\"\u003e| sudo bash\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nThis will download and copy the binary into: \u003ccode\u003e/usr/local/bin\u003c/code\u003e, as a general rule I recommend reading whatever you are going to pipe into bash in your terminal to avoid potential dangers of \u003cem\u003ethe internet\u003c/em\u003e.\u003c/p\u003e\n\n\u003cp\u003eThen we need to generate (and then create it in the cluster) a file called \u003ccode\u003eremote.yaml\u003c/code\u003e (or any name you like), it\u0026rsquo;s necessary in order to tell gitkube how to deploy our application once we \u003ccode\u003egit push\u003c/code\u003e it:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ gitkube remote generate -f remote.yaml\nRemote name: minikube\nnamespace: default\nSSH public key file: ~/.ssh/id_rsa.pub\nInitialisation: K8S YAML Manifests\nManifests/Chart directory: Enter\nChoose docker registry: docker.io/kainlite\nDeployment name: echobot\nContainer name: echobot\nDockerfile path: Dockerfile\nBuild context path: ./\nAdd another container? [y/N] Enter\nAdd another deployment? [y/N] Enter\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAnd this will yield the following \u003ccode\u003eremote.yaml\u003c/code\u003e file that we then need to create in our cluster as it is a custom resource it might look a bit different from the default kubernetes resources.\u003c/p\u003e\n\n\u003cp\u003eThe actual file \u003ccode\u003eremote.yaml\u003c/code\u003e:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eapiVersion: gitkube.sh/v1alpha1\nkind: Remote\nmetadata:\n  creationTimestamp: \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e\n  name: minikube\n  namespace: default\nspec:\n  authorizedKeys:\n  - \u003cspan style=\"color:#e6db74\"\u003e|\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA8jvVVtDSVe25p2U2tDGQyVrnv3YcWjJc6AXTUMc0YNi+QDm6s+hMTwkf2wDRD7b6Y3kmgNSqLEE0EEgOkA69c8PgypM7AwbKZ51V9XcdPd7NyLabpomNiftpUwi01DGfBr25lJV9h2MHwsI/6w1izDvQyN7fAl+aTFgx+VGg1p4FygXWeBqm0n0DfHmBI7PDXxGbuFTJHUmRVS+HPd5Bi31S9Kq6eoodBWtV2MlVnZkpF67FWt2Xo2rFKVf4pZR4N1yjZKRsvIaI5i14LvtOoOqNQ+/tPMAFAif3AhldOW06fgnddYGi/iF+CatVttwNDWmClSOek9LO72UzR4s0xQ== gabriel@kainlite\u003c/span\u003e\n  deployments:\n  - containers:\n    - dockerfile: Dockerfile\n      name: echobot\n      path: ./\n    name: echobot\n  manifests:\n    helm: {}\n    path: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\n  registry:\n    credentials:\n      secretKeyRef:\n        key: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\n      secretRef: minikube-regsecret\n    url: docker.io/kainlite\nstatus:\n  remoteUrl: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\n  remoteUrlDesc: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nThere are a few details to have in mind here, the \u003cem\u003edeployment\u003c/em\u003e name because gitkube expects a deployment to be already present with that name in order to update/upgrade it, the path to the Dockerfile, or helm chart, credentials for the registry if any, I\u0026rsquo;m using a public image, so we don\u0026rsquo;t need any of that. The \u003cem\u003ewizard\u003c/em\u003e will let you choose and customize a few options for your deployment.\u003c/p\u003e\n\n\u003cp\u003eThe last step would be to finally create the resource:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ gitkube remote create -f remote.yaml\nINFO[\u003cspan style=\"color:#ae81ff\"\u003e0000\u003c/span\u003e] remote minikube created\nINFO[\u003cspan style=\"color:#ae81ff\"\u003e0000\u003c/span\u003e] waiting for remote url\nINFO[\u003cspan style=\"color:#ae81ff\"\u003e0000\u003c/span\u003e] remote url: ssh://default-minikube@\u003cspan style=\"color:#ae81ff\"\u003e10.98\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e213.202\u003c/span\u003e/~/git/default-minikube\n\n  \u003cspan style=\"color:#75715e\"\u003e# add the remote to your git repo and push:\u003c/span\u003e\n  git remote add minikube ssh://default-minikube@\u003cspan style=\"color:#ae81ff\"\u003e10.98\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e213.202\u003c/span\u003e/~/git/default-minikube\n  git push minikube master\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eAfter adding the new remote called \u003cem\u003eminikube\u003c/em\u003e  we have everything ready to go, so let\u0026rsquo;s test it and see what happens:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ git push minikube master\nEnumerating objects: \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e, done.\nCounting objects: \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e% (\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e), done.\nDelta compression using up to \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e threads\nCompressing objects: \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e% (\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e), done.\nWriting objects: \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e% (\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e), \u003cspan style=\"color:#ae81ff\"\u003e1.92\u003c/span\u003e KiB \u003cspan style=\"color:#e6db74\"\u003e| 1.92 MiB/s, done.\u003c/span\u003e\nTotal \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e (delta \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e), reused \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e (delta \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)\nremote: Gitkube build system : Tue Jan  \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e23\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e58\u003c/span\u003e UTC \u003cspan style=\"color:#ae81ff\"\u003e2019\u003c/span\u003e: Initialising\nremote:\nremote: Creating the build directory\nremote: Checking out \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;master:a0265bc5d0229dce0cffc985ca22ebe28532ee95\u0026#39;\u003c/span\u003e to \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/home/default-minikube/build/default-minikube\u0026#39;\u003c/span\u003e\nremote:\nremote: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e deployment(s) found in this repo\nremote: Trying to build them...\nremote:\nremote: Building Docker image for : echobot\nremote:\nremote: Building Docker image : docker.io/kainlite/default-minikube-default.echobot-echobot:a0265bc5d0229dce0cffc985ca22ebe28532ee95\nremote: Sending build context to Docker daemon   \u003cspan style=\"color:#ae81ff\"\u003e7.\u003c/span\u003e68kB\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : FROM golang:\u003cspan style=\"color:#ae81ff\"\u003e1.11\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e-alpine as builder\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 57915f96905a\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : WORKDIR /app\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\u003c/span\u003e\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 997342e65c61\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : RUN adduser -D -g \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;app\u0026#39;\u003c/span\u003e app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e     chown -R app:app /app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e     apk add git \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e apk add gcc musl-dev\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\u003c/span\u003e\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 7c6d8b9d1137\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : ADD . /app/\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\u003c/span\u003e\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; ca751c2678c4\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : RUN go get -d -v ./... \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e go build -o main . \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e chown -R app:app /app /home/app\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\u003c/span\u003e\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 16e44978b140\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : FROM golang:\u003cspan style=\"color:#ae81ff\"\u003e1.11\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e-alpine\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 57915f96905a\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : WORKDIR /app\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\u003c/span\u003e\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 997342e65c61\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : RUN adduser -D -g \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;app\u0026#39;\u003c/span\u003e app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e     chown -R app:app /app\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\u003c/span\u003e\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 55f48da0f9ac\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : COPY --from=builder --chown=app /app/health_check.sh /app/health_check.sh\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\u003c/span\u003e\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 139250fd6c77\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : COPY --from=builder --chown=app /app/main /app/main\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\u003c/span\u003e\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 2f1eb9f16e9f\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e11\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : USER app\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\u003c/span\u003e\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; a72f27dccff2\u003c/span\u003e\nremote: Step \u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e : CMD [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/app/main\u0026#34;\u003c/span\u003e]\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Using cache\u003c/span\u003e\nremote:  ---\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; 034275449e08\u003c/span\u003e\nremote: Successfully built \u003cspan style=\"color:#ae81ff\"\u003e034275449e08\u003c/span\u003e\nremote: Successfully tagged kainlite/default-minikube-default.echobot-echobot:a0265bc5d0229dce0cffc985ca22ebe28532ee95\nremote: pushing docker.io/kainlite/default-minikube-default.echobot-echobot:a0265bc5d0229dce0cffc985ca22ebe28532ee95 to registry\nremote: The push refers to repository [docker.io/kainlite/default-minikube-default.echobot-echobot]\nremote: bba61bf193fe: Preparing\nremote: 3f0355bbea40: Preparing\nremote: 2ebcdc9e5e8f: Preparing\nremote: 6f1324339fd4: Preparing\nremote: 93391cb9fd4b: Preparing\nremote: cb9d0f9550f6: Preparing\nremote: 93448d8c2605: Preparing\nremote: c54f8a17910a: Preparing\nremote: df64d3292fd6: Preparing\nremote: cb9d0f9550f6: Waiting\nremote: 93448d8c2605: Waiting\nremote: c54f8a17910a: Waiting\nremote: df64d3292fd6: Waiting\nremote: 2ebcdc9e5e8f: Layer already exists\nremote: 6f1324339fd4: Layer already exists\nremote: 3f0355bbea40: Layer already exists\nremote: bba61bf193fe: Layer already exists\nremote: 93391cb9fd4b: Layer already exists\nremote: 93448d8c2605: Layer already exists\nremote: cb9d0f9550f6: Layer already exists\nremote: df64d3292fd6: Layer already exists\nremote: c54f8a17910a: Layer already exists\nremote: a0265bc5d0229dce0cffc985ca22ebe28532ee95: digest: sha256:3046c989fe1b1c4f700aaad875658c73ef571028f731546df38fb404ac22a9c9 size: \u003cspan style=\"color:#ae81ff\"\u003e2198\u003c/span\u003e\nremote:\nremote: Updating Kubernetes deployment: echobot\nremote: deployment \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;echobot\u0026#34;\u003c/span\u003e image updated\nremote: deployment \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;echobot\u0026#34;\u003c/span\u003e successfully rolled out\nremote: NAME      DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\nremote: echobot   \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e         \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e         \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e            \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e           31s\nremote:\nremote: Removing build directory\nremote:\nremote: Gitkube build system : Tue Jan  \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e23\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e51\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e16\u003c/span\u003e UTC \u003cspan style=\"color:#ae81ff\"\u003e2019\u003c/span\u003e: Finished build\nremote:\nremote:\nTo ssh://\u003cspan style=\"color:#ae81ff\"\u003e10.98\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e213.202\u003c/span\u003e/~/git/default-minikube\n * [new branch]      master -\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; master\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nQuite a lot happened there, first of all gitkubed checked out the commit from the branch or HEAD that we pushed to \u003ccode\u003e/home/default-minikube/build/default-minikube\u003c/code\u003e and then started building and tagged the docker image with the corresponding SHA, after that it pushed the image to \u003ca href=\"https://cloud.docker.com/u/kainlite/repository/docker/kainlite/default-minikube-default.echobot-echobot\"\u003edocker hub\u003c/a\u003e and then updated the deployment that we already had in there for the echo bot.\u003c/p\u003e\n\n\u003cp\u003eThe last step would be to verify that the pod was actually updated, so we can inspect the pod configuration with \u003ccode\u003ekubectl describe pod echobot-654cdbfb99-g4bwv\u003c/code\u003e:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e $ kubectl describe pod echobot-654cdbfb99-g4bwv\nName:               echobot-654cdbfb99-g4bwv\nNamespace:          default\nPriority:           \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\nPriorityClassName:  \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eNode:               minikube/10.0.2.15\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eStart Time:         Tue, 01 Jan 2019 20:51:10 -0300\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eLabels:             app=echobot\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e                    pod-template-hash=654cdbfb99\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eAnnotations:        \u0026lt;none\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eStatus:             Running\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eIP:                 172.17.0.9\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eControlled By:      ReplicaSet/echobot-654cdbfb99\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eContainers:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  echobot:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Container ID:   docker://fe26ba9be6e2840c0d43a4fcbb4d79af38a00aa3a16411dee5e4af3823d44664\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Image:          docker.io/kainlite/default-minikube-default.echobot-echobot:a0265bc5d0229dce0cffc985ca22ebe28532ee95\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Image ID:       docker-pullable://kainlite/default-minikube-default.echobot-echobot@sha256:3046c989fe1b1c4f700aaad875658c73ef571028f731546df38fb404ac22a9c9\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Port:           \u0026lt;none\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Host Port:      \u0026lt;none\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    State:          Running\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      Started:      Tue, 01 Jan 2019 20:51:11 -0300\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Ready:          True\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Restart Count:  0\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Liveness:       exec [/bin/sh -c /app/health_check.sh] delay=0s timeout=1s period=10s #success=1 #failure=3\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Environment:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      SLACK_API_TOKEN:  really_long_token\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Mounts:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      /var/run/secrets/kubernetes.io/serviceaccount from default-token-ks4jx (ro)\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eConditions:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  Type              Status\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  Initialized       True\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  Ready             True\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  ContainersReady   True\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  PodScheduled      True\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eVolumes:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  default-token-ks4jx:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Type:        Secret (a volume populated by a Secret)\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    SecretName:  default-token-ks4jx\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    Optional:    false\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eQoS Class:       BestEffort\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eNode-Selectors:  \u0026lt;none\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eTolerations:     node.kubernetes.io/not-ready:NoExecute for 300s\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e                 node.kubernetes.io/unreachable:NoExecute for 300s\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eEvents:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  Type    Reason     Age   From               Message\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  ----    ------     ----  ----               -------\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  Normal  Scheduled  39m   default-scheduler  Successfully assigned default/echobot-654cdbfb99-g4bwv to minikube\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  Normal  Pulled     39m   kubelet, minikube  Container image \u0026#34;docker.io/kainlite/default-minikube-default.echobot-echobot:a0265bc5d0229dce0cffc985ca22ebe28532ee95\u0026#34; already present on machine\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  Normal  Created    39m   kubelet, minikube  Created container\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  Normal  Started    39m   kubelet, minikube  Started container\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAs we can see the image is the one that got built from our \u003ccode\u003egit push\u003c/code\u003e and everything is working as expected.\u003c/p\u003e\n\n\u003cp\u003eAnd that\u0026rsquo;s it for now, I think this tool has a lot of potential, it\u0026rsquo;s simple, nice and fast.\u003c/p\u003e\n\n\u003ch3 id=\"errata\"\u003eErrata\u003c/h3\u003e\n\n\u003cp\u003eIf you spot any error or have any suggestion, please send me a message so it gets fixed.\u003c/p\u003e\n\n\u003cp\u003eAlso, you can check the source code and changes in the \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003egenerated code\u003c/a\u003e and the \u003ca href=\"https://github.com/kainlite/blog\"\u003esources here\u003c/a\u003e\u003c/p\u003e\n"
    }, 
    {
      "id": "https://kainlite.github.io/blog/go_echobot/",
      "url": "https://kainlite.github.io/blog/go_echobot/",
      "title": "Go echo bot",
      "date_published": "2018-12-29T00:00:00Z",
      "content_html": "\n\n\u003ch3 id=\"echo-bot\"\u003e\u003cstrong\u003eEcho bot\u003c/strong\u003e\u003c/h3\u003e\n\n\u003cp\u003eThis post was going to be about advanced ksonnet usage, but it went more about the echo bot itself, so I decided to rename it.\u003c/p\u003e\n\n\u003cp\u003eTo be honest, there is no other way to get the benefits of having \u003ca href=\"https://ksonnet.io/\"\u003eksonnet\u003c/a\u003e if you\u0026rsquo;re not going to take advantage of the \u003cem\u003edeployments as code\u003c/em\u003e facilities that it brings thanks to Jsonnet.\u003c/p\u003e\n\n\u003cp\u003eThis time we will see how to use \u003ca href=\"https://github.com/cybermaggedon/ksonnet-cheat-sheet\"\u003eproper templates\u003c/a\u003e, it seems that the templates generated with \u003ccode\u003eks\u003c/code\u003e are outdated at the time of this writing ksonnet version is: 0.13.1, no surprise here because it\u0026rsquo;s not a really mature tool. It does require a lot of effort in learning, hacking and reading to get things to work, but hopefully soon it will be easier, of course this is my personal opinion and I have not used it for a real project yet, but I expect it to grow and become more usable before I attempt to do something for the real world with it.\u003c/p\u003e\n\n\u003cp\u003eIn the examples I will be using \u003ca href=\"https://kubernetes.io/docs/tasks/tools/install-minikube\"\u003eminikube\u003c/a\u003e or you can \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003echeck out this repo\u003c/a\u003e that has a good overview of minikube, once installed and started (\u003ccode\u003eminikube start\u003c/code\u003e) that command will download and configure the local environment, if you have been following the previous posts you already have minikube installed and working:\u003c/p\u003e\n\n\u003ch3 id=\"let-s-get-started\"\u003eLet\u0026rsquo;s get started\u003c/h3\u003e\n\n\u003cp\u003eThis time I\u0026rsquo;m not going to deploy another wordpress instance but a simple Slack echo bot made with go:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\n\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;os\u0026#34;\u003c/span\u003e\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;strings\u0026#34;\u003c/span\u003e\n\n        \u003cspan style=\"color:#a6e22e\"\u003eslack\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;github.com/nlopes/slack\u0026#34;\u003c/span\u003e\n)\n\n\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n        \u003cspan style=\"color:#a6e22e\"\u003eapi\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eslack\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNew\u003c/span\u003e(\n                \u003cspan style=\"color:#a6e22e\"\u003eos\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGetenv\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SLACK_API_TOKEN\u0026#34;\u003c/span\u003e),\n        )\n\n        \u003cspan style=\"color:#a6e22e\"\u003ertm\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eapi\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewRTM\u003c/span\u003e()\n        \u003cspan style=\"color:#66d9ef\"\u003ego\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ertm\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eManageConnection\u003c/span\u003e()\n\n        \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emsg\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003erange\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ertm\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eIncomingEvents\u003c/span\u003e {\n                \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrint\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Event Received: \u0026#34;\u003c/span\u003e)\n                \u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emsg\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eData\u003c/span\u003e.(\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e) {\n                \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eslack\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eHelloEvent\u003c/span\u003e:\n                        \u003cspan style=\"color:#75715e\"\u003e// Ignore hello\n\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n                \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eslack\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eConnectedEvent\u003c/span\u003e:\n                        \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Infos:\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eInfo\u003c/span\u003e)\n                        \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Connection counter:\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eConnectionCount\u003c/span\u003e)\n\n                \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eslack\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMessageEvent\u003c/span\u003e:\n                        \u003cspan style=\"color:#75715e\"\u003e// Only echo what it said to me\n\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e                        \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Message: %v\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e)\n                        \u003cspan style=\"color:#a6e22e\"\u003einfo\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ertm\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGetInfo\u003c/span\u003e()\n                        \u003cspan style=\"color:#a6e22e\"\u003eprefix\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSprintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026lt;@%s\u0026gt; \u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003einfo\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUser\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eID\u003c/span\u003e)\n\n                        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUser\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003einfo\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUser\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eID\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003estrings\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eHasPrefix\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eText\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eprefix\u003c/span\u003e) {\n                                \u003cspan style=\"color:#a6e22e\"\u003ertm\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSendMessage\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ertm\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewOutgoingMessage\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eText\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eChannel\u003c/span\u003e))\n                        }\n\n                \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eslack\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePresenceChangeEvent\u003c/span\u003e:\n                        \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Presence Change: %v\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e)\n\n                \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eslack\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eLatencyReport\u003c/span\u003e:\n                        \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Current latency: %v\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eValue\u003c/span\u003e)\n\n                \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eslack\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eRTMError\u003c/span\u003e:\n                        \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Error: %s\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eError\u003c/span\u003e())\n\n                \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eslack\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eInvalidAuthEvent\u003c/span\u003e:\n                        \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Invalid credentials\u0026#34;\u003c/span\u003e)\n                        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\n                \u003cspan style=\"color:#66d9ef\"\u003edefault\u003c/span\u003e:\n\n                        \u003cspan style=\"color:#75715e\"\u003e// Ignore other events..\n\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e                        \u003cspan style=\"color:#75715e\"\u003e// fmt.Printf(\u0026#34;Unexpected: %v\\n\u0026#34;, msg.Data)\n\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e                }\n        }\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAs you can see it\u0026rsquo;s the simplest example from the readme of the \u003ca href=\"https://github.com/nlopes/slack\"\u003eGo Slack API\u003c/a\u003e project, it only connects to Slack and when it reads a message if it\u0026rsquo;s addressed to the bot then it echoes the message back, creating a bot and everything else is out of the scope of this article but it\u0026rsquo;s really simple, you only need to create an app in the Slack workspace, set it as a bot and grab the token (there is a lot more that you can customize but that is the most basic procedure to get started with a bot), then you just invite it to any channel that you want and start interacting with it.\u003c/p\u003e\n\n\u003cp\u003eHere you can see the \u003ccode\u003eDockerfile\u003c/code\u003e, for security we create an app user for the build and for running it, and to save space and bandwidth we only ship what we need using a multi-stage build:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"color:#75715e\"\u003e# Build\u003c/span\u003e\nFROM golang:\u003cspan style=\"color:#ae81ff\"\u003e1.11\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e-alpine as builder\n\nWORKDIR /app\nRUN adduser -D -g \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;app\u0026#39;\u003c/span\u003e app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \\\n    chown -R app:app /app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \\\n    apk add git \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e apk add gcc musl-dev\n\nADD . /app/\nRUN go get -d -v ./... \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e go build -o main . \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e chown -R app:app /app /home/app\n\n\u003cspan style=\"color:#75715e\"\u003e# Run\u003c/span\u003e\nFROM golang:\u003cspan style=\"color:#ae81ff\"\u003e1.11\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e-alpine\n\nWORKDIR /app\nRUN adduser -D -g \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;app\u0026#39;\u003c/span\u003e app \u003cspan style=\"color:#75715e\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \\\n    chown -R app:app /app\n\nCOPY --from=builder --chown=app /app/health_check.sh /app/health_check.sh\nCOPY --from=builder --chown=app /app/main /app/main\n\nUSER app\nCMD [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/app/main\u0026#34;\u003c/span\u003e]\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nThere are a few more files in there, you can see the full sources \u003ca href=\"https://github.com/kainlite/echobot\"\u003ehere\u003c/a\u003e, for example \u003ccode\u003ehealth_check.sh\u003c/code\u003e, as our app doesn\u0026rsquo;t listen on any port we need a way to tell kubernetes how to check if our app is alive.\u003c/p\u003e\n\n\u003cp\u003eOkay, enough boilerplate let\u0026rsquo;s get to business, so let\u0026rsquo;s create a new ksonnet application:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ ks init echobot\nINFO Using context \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;minikube\u0026#34;\u003c/span\u003e from kubeconfig file \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;~/.kube/config\u0026#34;\u003c/span\u003e\nINFO Creating environment \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;default\u0026#34;\u003c/span\u003e with namespace \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;default\u0026#34;\u003c/span\u003e, pointing to \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;version:v1.8.0\u0026#34;\u003c/span\u003e cluster at address \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://192.168.99.100:8443\u0026#34;\u003c/span\u003e\nINFO Generating ksonnet-lib data at path \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;~/Webs/echobot/echobot/lib/ksonnet-lib/v1.8.0\u0026#39;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eAnd now let\u0026rsquo;s grab a template and modify it accordingly to be able to create the deployment for the bot \u003ccode\u003ecomponents/echobot.jsonnet\u003c/code\u003e:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e// Import KSonnet library\nlocal params = std.extVar(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;__ksonnet/params\u0026#39;\u003c/span\u003e).components.demo;\nlocal k = import \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;k.libsonnet\u0026#39;\u003c/span\u003e;\n\n// Specify the import objects that we need\nlocal container = k.extensions.v1beta1.deployment.mixin.spec.template.spec.containersType;\nlocal depl = k.extensions.v1beta1.deployment;\n\n// Environment variables, instead of hardcoding it here we could use a param or a secret\n// But I will leave that as an exercise for you :)\nlocal envs = [\n  {\n    name: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;SLACK_API_TOKEN\u0026#39;\u003c/span\u003e,\n    value: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;really-long-token\u0026#39;\u003c/span\u003e,\n  },\n];\n\nlocal livenessProbe = {\n  exec: {\n    command: [\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/bin/sh\u0026#39;\u003c/span\u003e,\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;-c\u0026#39;\u003c/span\u003e,\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/app/health_check.sh\u0026#39;\u003c/span\u003e,\n    ],\n  },\n};\n\n// Define containers\nlocal containers = [\n  container.new(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;echobot\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;kainlite/echobot:0.0.2\u0026#39;\u003c/span\u003e) {\n    env: (envs),\n    livenessProbe: livenessProbe,\n  },\n];\n\n// Define deployment with \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e replicas\nlocal deployment =\n  depl.new(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;echobot\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, containers, { app: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;echobot\u0026#39;\u003c/span\u003e });\n\nlocal resources = [deployment];\n\n// Return list of resources.\nk.core.v1.list.new(resources)\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nNote that I have uploaded that image to docker hub so you can use it to follow the example if you want, after that just replace \u003ccode\u003ereally-long-token\u003c/code\u003e with your token, and then do:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ ks apply default\nINFO Applying deployments echobot\nINFO Creating non-existent deployments echobot\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eAnd now if we check our deployment and pod, we should see something like this:\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/echobot.png\" alt=\"Echo bot\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eAnd in the logs:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e $ kubectl get pods\nNAME                               READY     STATUS    RESTARTS   AGE\nechobot-7456f7d7dd-twg4r           \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          53s\n\n$ kubectl logs -f echobot-7456f7d7dd-twg4r\nEvent Received: Event Received: Infos: \u003cspan style=\"color:#75715e\"\u003e\u0026amp;{wss://cerberus-xxxx.lb.slack-msgs.com/websocket/1gvXP_yQCFE-Y=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0xc000468000\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0xc0004482a0\u003c/span\u003e [] [] [] [] []}\nConnection counter: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\nEvent Received: Event Received: Current latency: \u003cspan style=\"color:#ae81ff\"\u003e1.\u003c/span\u003e256397423s\nEvent Received: Current latency: \u003cspan style=\"color:#ae81ff\"\u003e1.\u003c/span\u003e25679313s\nEvent Received: Current latency: \u003cspan style=\"color:#ae81ff\"\u003e1.\u003c/span\u003e256788737s\nEvent Received: Message: \u003cspan style=\"color:#75715e\"\u003e\u0026amp;{{message\u003c/span\u003e CEDGU6EA0 UEDJT5DDH \u0026lt;@UED48HD33\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; echo! 1546124966.002300  false [] [] \u0026lt;nil\u0026gt;  false 0  false  1546124966.002300   \u0026lt;nil\u0026gt;      [] 0 []  [] false \u0026lt;nil\u0026gt;  0 TEDJT5CTD []  false false} \u0026lt;nil\u0026gt;}\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eAnd that folks is all I have for now, I hope you enjoyed this small tour of ksonnet. The source code for the bot can be found \u003ca href=\"https://github.com/kainlite/echobot\"\u003ehere\u003c/a\u003e. In a future post I might explore \u003ca href=\"https://ksonnet.io/docs/examples/helm/\"\u003eksonnet and helm charts\u003c/a\u003e.\u003c/p\u003e\n\n\u003ch3 id=\"upcoming-topics\"\u003eUpcoming topics\u003c/h3\u003e\n\n\u003cp\u003eAs promised I will be doing one post about \u003ca href=\"https://github.com/hasura/gitkube\"\u003eGitkube\u003c/a\u003e and \u003ca href=\"https://github.com/GoogleContainerTools/skaffold\"\u003eSkaffold\u003c/a\u003e, there are a lot of deployment tools for kubernetes but those are the most promising ones to me, also after that I will start covering more topics about \u003ca href=\"https://www.docker.com/\"\u003eDocker\u003c/a\u003e, \u003ca href=\"https://containerd.io/\"\u003eContainerD\u003c/a\u003e, \u003ca href=\"https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/\"\u003eKubeADM\u003c/a\u003e, and Kubernetes in general.\u003c/p\u003e\n\n\u003ch3 id=\"errata\"\u003eErrata\u003c/h3\u003e\n\n\u003cp\u003eIf you spot any error or have any suggestion, please send me a message so it gets fixed.\u003c/p\u003e\n\n\u003cp\u003eAlso, you can check the source code and changes in the \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003egenerated code\u003c/a\u003e and the \u003ca href=\"https://github.com/kainlite/blog\"\u003esources here\u003c/a\u003e\u003c/p\u003e\n"
    }, 
    {
      "id": "https://kainlite.github.io/blog/getting_started_with_ksonnet/",
      "url": "https://kainlite.github.io/blog/getting_started_with_ksonnet/",
      "title": "Getting started with ksonnet",
      "date_published": "2018-12-27T00:00:00Z",
      "content_html": "\n\n\u003ch3 id=\"introduction\"\u003e\u003cstrong\u003eIntroduction\u003c/strong\u003e\u003c/h3\u003e\n\n\u003cp\u003eThis tutorial will show you how to create a simple application and also how to deploy it to kubernetes using \u003ca href=\"https://ksonnet.io/\"\u003eksonnet\u003c/a\u003e, in the examples I will be using \u003ca href=\"https://kubernetes.io/docs/tasks/tools/install-minikube\"\u003eminikube\u003c/a\u003e or you can \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003echeck out this repo\u003c/a\u003e that has a good overview of minikube, once installed and started (\u003ccode\u003eminikube start\u003c/code\u003e) that command will download and configure the local environment, if you have been following the previous posts you already have minikube installed and working, before we dive into an example let\u0026rsquo;s review some terminology from ksonnet (extracted from the \u003ca href=\"https://ksonnet.io/docs/concepts/\"\u003eofficial documentation\u003c/a\u003e):\u003c/p\u003e\n\n\u003ch4 id=\"application\"\u003eApplication\u003c/h4\u003e\n\n\u003cp\u003eA ksonnet application represents a well-structured directory of Kubernetes manifests (this is generated using the \u003ccode\u003eks init\u003c/code\u003e).\u003c/p\u003e\n\n\u003ch4 id=\"environment\"\u003eEnvironment\u003c/h4\u003e\n\n\u003cp\u003eAn environment consists of four elements, some of which can be pulled from your current kubeconfig context: Name, Server, Namespace, API version. The environment determines to which cluster you\u0026rsquo;re going to deploy the application.\u003c/p\u003e\n\n\u003ch4 id=\"component\"\u003eComponent\u003c/h4\u003e\n\n\u003cp\u003eA component can be as simple as a Kubernetes resource (a Pod, Deployment, etc), or a fully working stack for example EFK/ELK, you can generate components using \u003ccode\u003eks generate\u003c/code\u003e.\u003c/p\u003e\n\n\u003ch4 id=\"prototype\"\u003ePrototype\u003c/h4\u003e\n\n\u003cp\u003ePrototype + Parameters = Component. Think of a prototype as a base template before you apply the parameters, to set a name, replicas, etc for the resource, you can explore some system prototypes with \u003ccode\u003eks prototype\u003c/code\u003e.\u003c/p\u003e\n\n\u003ch4 id=\"parameter\"\u003eParameter\u003c/h4\u003e\n\n\u003cp\u003eIt gives live to a component with dynamic values, you can use \u003ccode\u003eks param\u003c/code\u003e to view or modify params, there are App params (global), Component params, and Environment params (overrides app params).\u003c/p\u003e\n\n\u003ch4 id=\"module\"\u003eModule\u003c/h4\u003e\n\n\u003cp\u003eModules provide a way for you to share components across environments. More concisely, a module refers to a subdirectory in components/ containing its own params.libsonnet. To create a module \u003ccode\u003eks module create \u0026lt;module name\u0026gt;\u003c/code\u003e.\u003c/p\u003e\n\n\u003ch4 id=\"part\"\u003ePart\u003c/h4\u003e\n\n\u003cp\u003eIt provides a way to organize and re-use code.\u003c/p\u003e\n\n\u003ch4 id=\"package\"\u003ePackage\u003c/h4\u003e\n\n\u003cp\u003eA package is a set of related prototypes and associates helper libraries, it allows you to create and share packages between applications.\u003c/p\u003e\n\n\u003ch4 id=\"registry\"\u003eRegistry\u003c/h4\u003e\n\n\u003cp\u003eIt\u0026rsquo;s essentially a repository for packages, it supports the incubator registry, github, filesystem, and Helm.\u003c/p\u003e\n\n\u003ch4 id=\"manifest\"\u003eManifest\u003c/h4\u003e\n\n\u003cp\u003eThe same old YAML or JSON manifest but this time written in \u003ca href=\"https://jsonnet.org/learning/tutorial.html\"\u003eJsonnet\u003c/a\u003e, basically Jsonnet is a simple extension of JSON.\u003c/p\u003e\n\n\u003cp\u003ePhew, that\u0026rsquo;s a lot of names and terminology at once, let\u0026rsquo;s get started with the terminal already.\u003c/p\u003e\n\n\u003ch3 id=\"let-s-get-started\"\u003eLet\u0026rsquo;s get started\u003c/h3\u003e\n\n\u003cp\u003eThis command will generate the following folder structure \u003ccode\u003eks init wordpress\u003c/code\u003e:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eINFO Using context \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;minikube\u0026#34;\u003c/span\u003e from kubeconfig file \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;~/.kube/config\u0026#34;\u003c/span\u003e\nINFO Creating environment \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;default\u0026#34;\u003c/span\u003e with namespace \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;default\u0026#34;\u003c/span\u003e, pointing to \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;version:v1.12.4\u0026#34;\u003c/span\u003e cluster at address \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://192.168.99.100:8443\u0026#34;\u003c/span\u003e\nINFO Generating ksonnet-lib data at path \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;~/k8s-examples/wordpress/lib/ksonnet-lib/v1.12.4\u0026#39;\u003c/span\u003e\n\n$ ls -l \u003cspan style=\"color:#e6db74\"\u003e|  awk \u0026#39;{ print $9 }\u0026#39;\u003c/span\u003e\napp.yaml        \u0026lt;--- Defines versions, namespace, cluster address, app name, registry.\ncomponents      \u0026lt;--- Components by default it\u0026#39;s empty and has a params file.\nenvironments    \u0026lt;--- By default there is only one environment called default.\nlib             \u0026lt;--- Here we can find the ksonnet helpers that match the Kubernetes API with the common resources (Pods, Deployments, etc).\nvendor          \u0026lt;--- Here is where the installed packages/apps go, it can be seen as a dependencies folder.\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s generate a \u003cem\u003edeployed-service\u003c/em\u003e and inspect it\u0026rsquo;s context:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ ks generate deployed-service wordpress \\\n  --image bitnami/wordpress:\u003cspan style=\"color:#ae81ff\"\u003e5.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e \\\n  --type ClusterIP\n\nINFO Writing component at \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;~/k8s-examples/wordpress/components/wordpress.jsonnet\u0026#39;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAt the moment of this writing the latest version of Wordpress is 5.0.2, it\u0026rsquo;s always recommended to use static version numbers instead of tags like latest (because latest can not be latest).\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s see how our component looks like:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003elocal env = std.extVar(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;__ksonnet/environments\u0026#34;\u003c/span\u003e);\nlocal params = std.extVar(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;__ksonnet/params\u0026#34;\u003c/span\u003e).components.wordpress;\n[\n  {\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apiVersion\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;v1\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;kind\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Service\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;metadata\u0026#34;\u003c/span\u003e: {\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: params.name\n    },\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;spec\u0026#34;\u003c/span\u003e: {\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ports\u0026#34;\u003c/span\u003e: [\n        {\n          \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;port\u0026#34;\u003c/span\u003e: params.servicePort,\n          \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;targetPort\u0026#34;\u003c/span\u003e: params.containerPort\n        }\n      ],\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;selector\u0026#34;\u003c/span\u003e: {\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app\u0026#34;\u003c/span\u003e: params.name\n      },\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: params.type\n    }\n  },\n  {\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apiVersion\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apps/v1beta2\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;kind\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Deployment\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;metadata\u0026#34;\u003c/span\u003e: {\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: params.name\n    },\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;spec\u0026#34;\u003c/span\u003e: {\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;replicas\u0026#34;\u003c/span\u003e: params.replicas,\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;selector\u0026#34;\u003c/span\u003e: {\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;matchLabels\u0026#34;\u003c/span\u003e: {\n          \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app\u0026#34;\u003c/span\u003e: params.name\n        },\n      },\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;template\u0026#34;\u003c/span\u003e: {\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;metadata\u0026#34;\u003c/span\u003e: {\n          \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;labels\u0026#34;\u003c/span\u003e: {\n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app\u0026#34;\u003c/span\u003e: params.name\n          }\n        },\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;spec\u0026#34;\u003c/span\u003e: {\n          \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;containers\u0026#34;\u003c/span\u003e: [\n            {\n              \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;image\u0026#34;\u003c/span\u003e: params.image,\n              \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: params.name,\n              \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ports\u0026#34;\u003c/span\u003e: [\n                {\n                  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;containerPort\u0026#34;\u003c/span\u003e: params.containerPort\n                }\n              ]\n            }\n          ]\n        }\n      }\n    }\n  }\n]\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nIt\u0026rsquo;s just another template for some known resources, a \u003ca href=\"https://kubernetes.io/docs/concepts/services-networking/service/\"\u003eservice\u003c/a\u003e and a \u003ca href=\"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/\"\u003edeployment\u003c/a\u003e that\u0026rsquo;s where the name came from: \u003cem\u003edeployed-service\u003c/em\u003e, but where are those params coming from?\u003c/p\u003e\n\n\u003cp\u003eIf we run \u003ccode\u003eks show default\u003c/code\u003e:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e---\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    ksonnet.io/component: wordpress\n  name: wordpress\nspec:\n  ports:\n  - port: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n    targetPort: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n  selector:\n    app: wordpress\n  type: ClusterIP\n---\napiVersion: apps/v1beta2\nkind: Deployment\nmetadata:\n  labels:\n    ksonnet.io/component: wordpress\n  name: wordpress\nspec:\n  replicas: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n  selector:\n    matchLabels:\n      app: wordpress\n  template:\n    metadata:\n      labels:\n        app: wordpress\n    spec:\n      containers:\n      - image: bitnami/wordpress:\u003cspan style=\"color:#ae81ff\"\u003e5.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n        name: wordpress\n        ports:\n        - containerPort: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nWe will see what our package will generate in \u003cem\u003eYAML\u003c/em\u003e with some good defaults. And by default if you remember from the definitions a component needs a params file to fill the blanks in this case it is \u003ccode\u003ecomponents/params.libsonnet\u003c/code\u003e:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e{\n  global: {\n    // User-defined global parameters; accessible to all component and environments, Ex:\n    // replicas: \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e,\n  },\n  components: {\n    // Component-level parameters, defined initially from \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;ks prototype use ...\u0026#39;\u003c/span\u003e\n    // Each object below should correspond to a component in the components/ directory\n    wordpress: {\n      containerPort: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e,\n      image: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;bitnami/wordpress:5.0.2\u0026#34;\u003c/span\u003e,\n      name: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;wordpress\u0026#34;\u003c/span\u003e,\n      replicas: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e,\n      servicePort: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e,\n      type: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ClusterIP\u0026#34;\u003c/span\u003e,\n    },\n  },\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nBut that\u0026rsquo;s not enough to run wordpress is it?, No is not, we need a database with persistent storage for it to work properly, so we will need to generate and extend another \u003cem\u003edeployed-service\u003c/em\u003e.\u003c/p\u003e\n\n\u003cp\u003eThe next step would be to create another component:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ ks generate deployed-service mariadb \\\n  --image bitnami/mariadb:\u003cspan style=\"color:#ae81ff\"\u003e10.1\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e37\u003c/span\u003e \\\n  --type ClusterIP\n\nINFO Writing component at \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/home/kainlite/Webs/k8s-examples/wordpress/components/mariadb.jsonnet\u0026#39;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nThe latest stable version of MariaDB 10.1 GA at the moment of this writting is 10.1.37.\u003c/p\u003e\n\n\u003cp\u003eThen we will need to add a persistent volume and also tell Wordpress to use this MariaDB instance. How do we do that, we will need to modify a few files, like this (in order to re-use things I placed the mysql variables in the global section, for this example that will simplify things, but it might not be the best approach for a production environment):\nThe resulting \u003ccode\u003ecomponents/params.json\u003c/code\u003e will be:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e{\n  global: {\n    // User-defined global parameters; accessible to all component and environments, Ex:\n    // replicas: \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e,\n    mariadbEmptyPassword: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;no\u0026#34;\u003c/span\u003e,\n    mariadbUser: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mywordpressuser\u0026#34;\u003c/span\u003e,\n    mariadbPassword: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mywordpresspassword\u0026#34;\u003c/span\u003e,\n    mariadbDatabase: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;bitnami_wordpress\u0026#34;\u003c/span\u003e,\n  },\n  components: {\n    // Component-level parameters, defined initially from \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;ks prototype use ...\u0026#39;\u003c/span\u003e\n    // Each object below should correspond to a component in the components/ directory\n    wordpress: {\n      containerPort: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e,\n      image: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;bitnami/wordpress:5.0.2\u0026#34;\u003c/span\u003e,\n      name: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;wordpress\u0026#34;\u003c/span\u003e,\n      replicas: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e,\n      servicePort: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e,\n      type: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ClusterIP\u0026#34;\u003c/span\u003e,\n    },\n    mariadb: {\n      containerPort: \u003cspan style=\"color:#ae81ff\"\u003e3306\u003c/span\u003e,\n      image: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;bitnami/mariadb:10.1.37\u0026#34;\u003c/span\u003e,\n      name: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mariadb\u0026#34;\u003c/span\u003e,\n      replicas: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e,\n      servicePort: \u003cspan style=\"color:#ae81ff\"\u003e3306\u003c/span\u003e,\n      type: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ClusterIP\u0026#34;\u003c/span\u003e,\n    },\n  },\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eThe resulting \u003ccode\u003ecomponents/wordpress.jsonnet\u003c/code\u003e will be:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003elocal env = std.extVar(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;__ksonnet/environments\u0026#34;\u003c/span\u003e);\nlocal params = std.extVar(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;__ksonnet/params\u0026#34;\u003c/span\u003e).components.wordpress;\n[\n  {\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apiVersion\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;v1\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;kind\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Service\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;metadata\u0026#34;\u003c/span\u003e: {\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: params.name\n    },\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;spec\u0026#34;\u003c/span\u003e: {\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ports\u0026#34;\u003c/span\u003e: [\n        {\n          \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;port\u0026#34;\u003c/span\u003e: params.servicePort,\n          \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;targetPort\u0026#34;\u003c/span\u003e: params.containerPort\n        }\n      ],\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;selector\u0026#34;\u003c/span\u003e: {\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app\u0026#34;\u003c/span\u003e: params.name\n      },\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: params.type\n    }\n  },\n  {\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apiVersion\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apps/v1beta2\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;kind\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Deployment\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;metadata\u0026#34;\u003c/span\u003e: {\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: params.name\n    },\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;spec\u0026#34;\u003c/span\u003e: {\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;replicas\u0026#34;\u003c/span\u003e: params.replicas,\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;selector\u0026#34;\u003c/span\u003e: {\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;matchLabels\u0026#34;\u003c/span\u003e: {\n          \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app\u0026#34;\u003c/span\u003e: params.name\n        },\n      },\n      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;template\u0026#34;\u003c/span\u003e: {\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;metadata\u0026#34;\u003c/span\u003e: {\n          \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;labels\u0026#34;\u003c/span\u003e: {\n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app\u0026#34;\u003c/span\u003e: params.name\n          }\n        },\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;spec\u0026#34;\u003c/span\u003e: {\n          \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;containers\u0026#34;\u003c/span\u003e: [\n            {\n              \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;image\u0026#34;\u003c/span\u003e: params.image,\n              \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: params.name,\n              \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ports\u0026#34;\u003c/span\u003e: [\n                {\n                  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;containerPort\u0026#34;\u003c/span\u003e: params.containerPort\n                }\n              ],\n              \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;env\u0026#34;\u003c/span\u003e: [\n                {\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;WORDPRESS_DATABASE_USER\u0026#34;\u003c/span\u003e,\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;value\u0026#34;\u003c/span\u003e: params.mariadbUser,\n                },\n                {\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;WORDPRESS_DATABASE_PASSWORD\u0026#34;\u003c/span\u003e,\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;value\u0026#34;\u003c/span\u003e: params.mariadbPassword,\n                },\n                {\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;WORDPRESS_DATABASE_NAME\u0026#34;\u003c/span\u003e,\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;value\u0026#34;\u003c/span\u003e: params.mariadbDatabase,\n                },\n                {\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;WORDPRESS_HOST\u0026#34;\u003c/span\u003e,\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;value\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mariadb\u0026#34;\u003c/span\u003e,\n                }\n              ]\n            }\n          ]\n        }\n      }\n    }\n  }\n]\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nThe only thing that changed here is \u003ccode\u003espec.containers.env\u003c/code\u003e which wasn\u0026rsquo;t present before.\u003c/p\u003e\n\n\u003cp\u003eThe resulting \u003ccode\u003ecomponents/mariadb.jsonnet\u003c/code\u003e will be:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003elocal env = std.extVar(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;__ksonnet/environments\u0026#34;\u003c/span\u003e);\nlocal params = std.extVar(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;__ksonnet/params\u0026#34;\u003c/span\u003e).components.mariadb;\n[\n{\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apiVersion\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;v1\u0026#34;\u003c/span\u003e,\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;kind\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Service\u0026#34;\u003c/span\u003e,\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;metadata\u0026#34;\u003c/span\u003e: {\n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: params.name\n        },\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;spec\u0026#34;\u003c/span\u003e: {\n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ports\u0026#34;\u003c/span\u003e: [\n            {\n                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;port\u0026#34;\u003c/span\u003e: params.servicePort,\n                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;targetPort\u0026#34;\u003c/span\u003e: params.containerPort\n            }\n            ],\n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;selector\u0026#34;\u003c/span\u003e: {\n                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app\u0026#34;\u003c/span\u003e: params.name\n            },\n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: params.type\n        }\n},\n{\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apiVersion\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apps/v1beta2\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;kind\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Deployment\u0026#34;\u003c/span\u003e,\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;metadata\u0026#34;\u003c/span\u003e: {\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: params.name\n    },\n    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;spec\u0026#34;\u003c/span\u003e: {\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;replicas\u0026#34;\u003c/span\u003e: params.replicas,\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;selector\u0026#34;\u003c/span\u003e: {\n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;matchLabels\u0026#34;\u003c/span\u003e: {\n                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app\u0026#34;\u003c/span\u003e: params.name\n            },\n        },\n        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;template\u0026#34;\u003c/span\u003e: {\n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;metadata\u0026#34;\u003c/span\u003e: {\n                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;labels\u0026#34;\u003c/span\u003e: {\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app\u0026#34;\u003c/span\u003e: params.name\n                }\n            },\n            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;spec\u0026#34;\u003c/span\u003e: {\n                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;containers\u0026#34;\u003c/span\u003e: [\n                {\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;image\u0026#34;\u003c/span\u003e: params.image,\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: params.name,\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ports\u0026#34;\u003c/span\u003e: [\n                    {\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;containerPort\u0026#34;\u003c/span\u003e: params.containerPort\n                    },\n                    ],\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;env\u0026#34;\u003c/span\u003e: [\n                    {\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ALLOW_EMPTY_PASSWORD\u0026#34;\u003c/span\u003e,\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;value\u0026#34;\u003c/span\u003e: params.mariadbEmptyPassword,\n                    },\n                    {\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MARIADB_USER\u0026#34;\u003c/span\u003e,\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;value\u0026#34;\u003c/span\u003e: params.mariadbUser,\n                    },\n                    {\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MARIADB_PASSWORD\u0026#34;\u003c/span\u003e,\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;value\u0026#34;\u003c/span\u003e: params.mariadbPassword,\n                    },\n                    {\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MARIADB_ROOT_PASSWORD\u0026#34;\u003c/span\u003e,\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;value\u0026#34;\u003c/span\u003e: params.mariadbPassword,\n                    },\n                    {\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MARIADB_DATABASE\u0026#34;\u003c/span\u003e,\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;value\u0026#34;\u003c/span\u003e: params.mariadbDatabase,\n                    },\n                    ],\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;volumeMounts\u0026#34;\u003c/span\u003e: [\n                    {\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mountPath\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/var/lib/mysql\u0026#34;\u003c/span\u003e,\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mariadb\u0026#34;\u003c/span\u003e\n                    }\n                    ]\n                }\n                ],\n                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;volumes\u0026#34;\u003c/span\u003e: [\n                {\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mariadb\u0026#34;\u003c/span\u003e,\n                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hostPath\u0026#34;\u003c/span\u003e: {\n                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;path\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/home/docker/mariadb-data\u0026#34;\u003c/span\u003e\n                    }\n                }\n                ]\n            }\n        }\n    }\n}\n]\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nI know, I know, that is a lot of JSON, I trust you have a decent scroll :).\u003c/p\u003e\n\n\u003cp\u003eThe only things that changed here are \u003ccode\u003espec.containers.env\u003c/code\u003e, \u003ccode\u003espec.containers.volumeMount\u003c/code\u003e and \u003ccode\u003espec.volumes\u003c/code\u003e which weren\u0026rsquo;t present before, that\u0026rsquo;s all you need to make wordpress work with mariadb.\u003c/p\u003e\n\n\u003cp\u003eThis post only scratched the surface of what Ksonnet and Jsonnet can do, in another post I will describe more advances features with less \u003cem\u003eJSON\u003c/em\u003e / \u003cem\u003eYAML\u003c/em\u003e. There are a lot of things that can be improved and we will cover those things in the next post, if you want to see all the source code for this post go \u003ca href=\"https://github.com/kainlite/ksonnet-wordpress-example\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s clean up \u003ccode\u003eks delete default\u003c/code\u003e:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eINFO Deleting services mariadb\nINFO Deleting deployments mariadb\nINFO Deleting services wordpress\nINFO Deleting deployments wordpress\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003ch3 id=\"notes\"\u003eNotes\u003c/h3\u003e\n\n\u003cp\u003eIf you want to check the wordpress installation via browser you can do \u003ccode\u003eminikube proxy\u003c/code\u003e and then look up the following URL: \u003ca href=\"http://localhost:8001/api/v1/namespaces/default/services/wordpress/proxy/\"\u003eWordpress\u003c/a\u003e (I\u0026rsquo;m using the default namespace here and the service name is wordpress, if you use ingress you don\u0026rsquo;t need to do this step)\u003c/p\u003e\n\n\u003cp\u003eI\u0026rsquo;m not aware if Ksonnet supports releases and rollbacks like Helm, but it seems it could be emulated using git tags and just some git hooks.\u003c/p\u003e\n\n\u003cp\u003eIf everything goes well, you should see something like this in the logs:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl logs -f wordpress-5b4d6bd47c-bdtmw\n\nWelcome to the Bitnami wordpress container\nSubscribe to project updates by watching https://github.com/bitnami/bitnami-docker-wordpress\nSubmit issues and feature requests at https://github.com/bitnami/bitnami-docker-wordpress/issues\n\nnami    INFO  Initializing apache\napache  INFO  ==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Patching httpoxy...\u003c/span\u003e\napache  INFO  ==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Configuring dummy certificates...\u003c/span\u003e\nnami    INFO  apache successfully initialized\nnami    INFO  Initializing php\nnami    INFO  php successfully initialized\nnami    INFO  Initializing mysql-client\nnami    INFO  mysql-client successfully initialized\nnami    INFO  Initializing libphp\nnami    INFO  libphp successfully initialized\nnami    INFO  Initializing wordpress\nmysql-c INFO  Trying to connect to MySQL server\nmysql-c INFO  Found MySQL server listening at mariadb:\u003cspan style=\"color:#ae81ff\"\u003e3306\u003c/span\u003e\nmysql-c INFO  MySQL server listening and working at mariadb:\u003cspan style=\"color:#ae81ff\"\u003e3306\u003c/span\u003e\nwordpre INFO\nwordpre INFO  \u003cspan style=\"color:#75715e\"\u003e########################################################################\u003c/span\u003e\nwordpre INFO   Installation parameters for wordpress:\nwordpre INFO     First Name: FirstName\nwordpre INFO     Last Name: LastName\nwordpre INFO     Username: user\nwordpre INFO     Password: \u003cspan style=\"color:#75715e\"\u003e**********\u003c/span\u003e\nwordpre INFO     Email: user@example.com\nwordpre INFO     Blog Name: User\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;s Blog!\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003ewordpre INFO     Table Prefix: wp_\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003ewordpre INFO   (Passwords are not shown for security reasons)\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003ewordpre INFO  ########################################################################\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003ewordpre INFO\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003enami    INFO  wordpress successfully initialized\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eINFO  ==\u0026gt; Starting wordpress...\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e[Thu Dec 27 04:30:59.684053 2018] [ssl:warn] [pid 116] AH01909: localhost:443:0 server certificate does NOT include an ID which matches the server name\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e[Thu Dec 27 04:30:59.684690 2018] [ssl:warn] [pid 116] AH01909: localhost:443:0 server certificate does NOT include an ID which matches the server name\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e[Thu Dec 27 04:30:59.738783 2018] [ssl:warn] [pid 116] AH01909: localhost:443:0 server certificate does NOT include an ID which matches the server name\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e[Thu Dec 27 04:30:59.739701 2018] [ssl:warn] [pid 116] AH01909: localhost:443:0 server certificate does NOT include an ID which matches the server name\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e[Thu Dec 27 04:30:59.765798 2018] [mpm_prefork:notice] [pid 116] AH00163: Apache/2.4.37 (Unix) OpenSSL/1.1.0j PHP/7.2.13 configured -- resuming normal operations\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e[Thu Dec 27 04:30:59.765874 2018] [core:notice] [pid 116] AH00094: Command line: \u0026#39;\u003c/span\u003ehttpd -f /bitnami/apache/conf/httpd.conf -D FOREGROUND\u0026#39;\n\u003cspan style=\"color:#ae81ff\"\u003e172.17\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e - - [\u003cspan style=\"color:#ae81ff\"\u003e27\u003c/span\u003e/Dec/\u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e04\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e31\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e00\u003c/span\u003e +\u003cspan style=\"color:#ae81ff\"\u003e0000\u003c/span\u003e] \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET / HTTP/1.1\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3718\u003c/span\u003e\n\u003cspan style=\"color:#ae81ff\"\u003e172.17\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e - - [\u003cspan style=\"color:#ae81ff\"\u003e27\u003c/span\u003e/Dec/\u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e04\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e31\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e01\u003c/span\u003e +\u003cspan style=\"color:#ae81ff\"\u003e0000\u003c/span\u003e] \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET /wp-includes/js/wp-embed.min.js?ver=5.0.2 HTTP/1.1\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e753\u003c/span\u003e\n\u003cspan style=\"color:#ae81ff\"\u003e172.17\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e - - [\u003cspan style=\"color:#ae81ff\"\u003e27\u003c/span\u003e/Dec/\u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e04\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e31\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e01\u003c/span\u003e +\u003cspan style=\"color:#ae81ff\"\u003e0000\u003c/span\u003e] \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET /wp-includes/css/dist/block-library/theme.min.css?ver=5.0.2 HTTP/1.1\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e452\u003c/span\u003e\n\u003cspan style=\"color:#ae81ff\"\u003e172.17\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e - - [\u003cspan style=\"color:#ae81ff\"\u003e27\u003c/span\u003e/Dec/\u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e04\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e31\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e01\u003c/span\u003e +\u003cspan style=\"color:#ae81ff\"\u003e0000\u003c/span\u003e] \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET /wp-includes/css/dist/block-library/style.min.css?ver=5.0.2 HTTP/1.1\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4281\u003c/span\u003e\n\u003cspan style=\"color:#ae81ff\"\u003e172.17\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e - - [\u003cspan style=\"color:#ae81ff\"\u003e27\u003c/span\u003e/Dec/\u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e04\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e31\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e01\u003c/span\u003e +\u003cspan style=\"color:#ae81ff\"\u003e0000\u003c/span\u003e] \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET /wp-content/themes/twentynineteen/style.css?ver=1.1 HTTP/1.1\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e19371\u003c/span\u003e\n\u003cspan style=\"color:#ae81ff\"\u003e172.17\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e - - [\u003cspan style=\"color:#ae81ff\"\u003e27\u003c/span\u003e/Dec/\u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e04\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e31\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e01\u003c/span\u003e +\u003cspan style=\"color:#ae81ff\"\u003e0000\u003c/span\u003e] \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET /wp-content/themes/twentynineteen/print.css?ver=1.1 HTTP/1.1\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1230\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eAnd that folks is all I have for now, be sure to check out the \u003ca href=\"https://ksonnet.io/docs/\"\u003eKsonnet official documentation\u003c/a\u003e and \u003ccode\u003eks help\u003c/code\u003e to know more about what ksonnet can do to help you deploy your applications to any kubernetes cluster.\u003c/p\u003e\n\n\u003ch3 id=\"errata\"\u003eErrata\u003c/h3\u003e\n\n\u003cp\u003eIf you spot any error or have any suggestion, please send me a message so it gets fixed.\u003c/p\u003e\n\n\u003cp\u003eAlso you can check the source code and changes in the \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003egenerated code\u003c/a\u003e and the \u003ca href=\"https://github.com/kainlite/blog\"\u003esources here\u003c/a\u003e\u003c/p\u003e\n"
    }, 
    {
      "id": "https://kainlite.github.io/blog/deploying_my_apps_with_helm/",
      "url": "https://kainlite.github.io/blog/deploying_my_apps_with_helm/",
      "title": "Deploying my apps with Helm",
      "date_published": "2018-12-24T00:00:00Z",
      "content_html": "\n\n\u003ch3 id=\"deploying-my-apps-with-helm\"\u003e\u003cstrong\u003eDeploying my apps with Helm\u003c/strong\u003e\u003c/h3\u003e\n\n\u003cp\u003eIf you are already familiar with \u003ca href=\"https://helm.sh/\"\u003eHelm\u003c/a\u003e, and the different types of kubernetes workloads / resource types you might be wondering how to install apps directly to kubernetes, yes, you don\u0026rsquo;t have to re-invent the wheel for your mysql installation, or your postgres, or nginx, jenkins, You name it. Helm solves that problem with \u003ca href=\"https://github.com/helm/charts\"\u003eCharts\u003c/a\u003e, this list has the official charts maintained by the community, where the folder incubator may refer to charts that are still not compliant with the \u003ca href=\"https://github.com/helm/charts/blob/master/CONTRIBUTING.md#technical-requirements\"\u003etechnical requirements\u003c/a\u003e but probably usable and the folder stable is for \u003cem\u003egraduated\u003c/em\u003e charts. This is not the only source of charts as you can imagine, You can use any source for your charts, even just the \u003ca href=\"https://docs.helm.sh/using_helm/#helm-install-installing-a-package\"\u003etgz\u003c/a\u003e files, as we will see in this post.\u003c/p\u003e\n\n\u003cp\u003eHow do I search for charts?:\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ helm search wordpress\nNAME                    CHART VERSION   APP VERSION     DESCRIPTION\nstable/wordpress        \u003cspan style=\"color:#ae81ff\"\u003e3.3\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e           \u003cspan style=\"color:#ae81ff\"\u003e4.9\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e           Web publishing platform for building blogs and websites.\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nNote that I\u0026rsquo;m not a fan of Wordpress or PHP itself, but it seems like the most common example everywhere. As we can see here it says stable/wordpress so we know that we\u0026rsquo;re using the official repo in the folder stable, but what if we don\u0026rsquo;t want that chart, but someone else provides one with more features or something that You like better. Let\u0026rsquo;s use the one from \u003ca href=\"https://bitnami.com/stack/wordpress/helm\"\u003eBitnami\u003c/a\u003e, so if we check their page you can select different kind of deployments but for it to work we need to add another external repo:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003ehelm repo add bitnami https://charts.bitnami.com/bitnami\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nSo if we search again we will now see two options (at the moment of this writing, the latest version is actually 5.0.2):\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ helm search wordpress\nNAME                    CHART VERSION   APP VERSION     DESCRIPTION\nbitnami/wordpress       \u003cspan style=\"color:#ae81ff\"\u003e5.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e           \u003cspan style=\"color:#ae81ff\"\u003e5.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e           Web publishing platform for building blogs and websites.\nstable/wordpress        \u003cspan style=\"color:#ae81ff\"\u003e3.3\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e           \u003cspan style=\"color:#ae81ff\"\u003e4.9\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e           Web publishing platform for building blogs and websites.\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nLet\u0026rsquo;s check the \u003ca href=\"https://github.com/helm/charts/tree/master/stable/wordpress\"\u003edocumentation\u003c/a\u003e of the chart to create our \u003ccode\u003evalues.yaml\u003c/code\u003e file, note that in this example the stable wordpress chart it\u0026rsquo;s also maintained by Bitnami, so they have the same configuration :), this won\u0026rsquo;t always be the case but it simplifies things for us.\u003c/p\u003e\n\n\u003cp\u003eOur example \u003ccode\u003evalues.yaml\u003c/code\u003e will look like:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003ewordpressBlogName: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Testing Helm Charts\u0026#34;\u003c/span\u003e\npersistence:\n  size: 1Gi\ningress:\n  enabled: \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nWe will only change the blog name by default, the persistent volume size and also enable \u003ca href=\"https://kubernetes.io/docs/concepts/services-networking/ingress/\"\u003eingress\u003c/a\u003e (Our app should be available through \u003ccode\u003ewordpress.local\u003c/code\u003e inside the cluster), if you are using minikube be sure to enable the \u003ca href=\"https://kubernetes.io/docs/concepts/services-networking/ingress/\"\u003eingress\u003c/a\u003e addon.\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ minikube addons enable ingress\ningress was successfully enabled\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eWe can then install \u003ccode\u003estable/wordpress\u003c/code\u003e or \u003ccode\u003ebitnami/wordpress\u003c/code\u003e, we will follow up with the one from Bitnami repo.\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ helm install bitnami/wordpress \\\n--set image.repository=bitnami/wordpress \\\n--set image.tag=\u003cspan style=\"color:#ae81ff\"\u003e5.0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e \\\n-f values.yaml\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAs it\u0026rsquo;s a common good practice to use specific versions we will do it here, it\u0026rsquo;s better to do it this way because you can easily move between known versions and also avoid unknown states, this can happen by misunderstanding what latest means, \u003ca href=\"https://medium.com/@mccode/the-misunderstood-docker-tag-latest-af3babfd6375\"\u003efollow the example\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eYou should see something like:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eNAME:   plucking-condor\nLAST DEPLOYED: Mon Dec \u003cspan style=\"color:#ae81ff\"\u003e24\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e13\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e06\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e38\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e\nNAMESPACE: default\nSTATUS: DEPLOYED\n\nRESOURCES:\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1/Pod(related)\u003c/span\u003e\nNAME                                        READY  STATUS             RESTARTS  AGE\nplucking-condor-wordpress-84845db8b5-hkqhc  \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e    ContainerCreating  \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e         0s\nplucking-condor-mariadb-\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e                   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e    Pending            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e         0s\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1/Secret\u003c/span\u003e\n\nNAME                       AGE\nplucking-condor-mariadb    0s\nplucking-condor-wordpress  0s\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1/ConfigMap\u003c/span\u003e\nplucking-condor-mariadb        0s\nplucking-condor-mariadb-tests  0s\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1/PersistentVolumeClaim\u003c/span\u003e\nplucking-condor-wordpress  0s\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1/Service\u003c/span\u003e\nplucking-condor-mariadb    0s\nplucking-condor-wordpress  0s\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1beta1/Deployment\u003c/span\u003e\nplucking-condor-wordpress  0s\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1beta1/StatefulSet\u003c/span\u003e\nplucking-condor-mariadb  0s\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1beta1/Ingress\u003c/span\u003e\nwordpress.local-plucking-condor  0s\n\n\nNOTES:\n\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e. Get the WordPress URL:\n\n  You should be able to access your new WordPress installation through\n  http://wordpress.local/admin\n\n\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e. Login with the following credentials to see your blog\n\n  echo Username: user\n  echo Password: $(kubectl get secret --namespace default plucking-condor-wordpress -o jsonpath=\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{.data.wordpress-password}\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e| base64 --decode)\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nDepending on the cluster provider or installation itself, you might need to replace the \u003ccode\u003epersistence.storageClass\u003c/code\u003e to match what your cluster has, note that in the values file is represented like JSON with dot notation but in your \u003ccode\u003evalues.yaml\u003c/code\u003e you need to stick to YAML format and indent \u003ccode\u003estorageClass\u003c/code\u003e under persistence as usual, the kubernetes API parses and uses JSON but YAML seems more human friendly.\u003c/p\u003e\n\n\u003cp\u003eAt this point we should a working wordpress installation, also move between versions, but be aware that the application is in charge of the database schema and updating it to match what the new version needs, this can also be troublesome rolling back or when downgrading, so if you use persistent data \u003cem\u003eALWAYS\u003c/em\u003e have a working backup, because when things go south, you will want to quickly go back to a known state, also note that I said \u0026ldquo;working backup\u0026rdquo;, yes, test that the backup works and that You can restore it somewhere else before doing anything destructive or that can has repercussions, this will bring you peace of mind and better ways to organize yourself while upgrading, etc.\u003c/p\u003e\n\n\u003cp\u003eNow let\u0026rsquo;s check that all resources are indeed working and that we can use our recently installed app.\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl get all\nNAME                                             READY     STATUS        RESTARTS   AGE\npod/plucking-condor-mariadb-\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e                    \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Running       \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          12m\npod/plucking-condor-wordpress-84845db8b5-hkqhc   \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       Running       \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          12m\n\nNAME                                TYPE           CLUSTER-IP       EXTERNAL-IP      PORT(S)                      AGE\nservice/kubernetes                  ClusterIP      \u003cspan style=\"color:#ae81ff\"\u003e10.96\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e        \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;           443/TCP                      37h\u003c/span\u003e\nservice/plucking-condor-mariadb     ClusterIP      \u003cspan style=\"color:#ae81ff\"\u003e10.106\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e219.59\u003c/span\u003e    \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;           3306/TCP                     12m\u003c/span\u003e\nservice/plucking-condor-wordpress   LoadBalancer   \u003cspan style=\"color:#ae81ff\"\u003e10.100\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e239.163\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e10.100\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e239.163\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e31764\u003c/span\u003e/TCP,\u003cspan style=\"color:#ae81ff\"\u003e443\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e32308\u003c/span\u003e/TCP   12m\n\nNAME                                        DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/plucking-condor-wordpress   \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e         \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e         \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e            \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e           12m\n\nNAME                                                   DESIRED   CURRENT   READY     AGE\nreplicaset.apps/plucking-condor-wordpress-84845db8b5   \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e         \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e         \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e         12m\n\nNAME                                       DESIRED   CURRENT   AGE\nstatefulset.apps/plucking-condor-mariadb   \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e         \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e         12m\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nYou can deploy it to a custom namespace (In this case I deployed it to the default namespace), the only change for that would be to set the parameter \u003ccode\u003e--namespace\u003c/code\u003e in the \u003ccode\u003ehelm install\u003c/code\u003e line.\u003c/p\u003e\n\n\u003cp\u003eIf you use minikube then ingress will expose a nodeport that we can find using \u003ccode\u003eminikube service list\u003c/code\u003e then using the browser or curl to navigate our freshly installed wordpress.\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e $ minikube service list\n|-------------|---------------------------|--------------------------------\u003cspan style=\"color:#e6db74\"\u003e|\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e|  NAMESPACE  |           NAME            |              URL               |\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e|-------------|---------------------------|--------------------------------|\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e| default     | kubernetes                | No node port                   |\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e| default     | plucking-condor-mariadb   | No node port                   |\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e| default     | plucking-condor-wordpress | http://192.168.99.100:31764    |\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e|             |                           | http://192.168.99.100:32308    |\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e| kube-system | default-http-backend      | http://192.168.99.100:30001    |\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e| kube-system | kube-dns                  | No node port                   |\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e| kube-system | kubernetes-dashboard      | No node port                   |\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e| kube-system | tiller-deploy             | No node port                   |\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e|-------------|---------------------------|--------------------------------|\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nIn the cloud or on premises this will indeed be different and you should have a publicly available installation using your own domain name (In this case http is at: \u003ca href=\"http://192.168.99.100:31764\"\u003ehttp://192.168.99.100:31764\u003c/a\u003e and https at: \u003ca href=\"http://192.168.99.100:32308\"\u003ehttp://192.168.99.100:32308\u003c/a\u003e, and \u003ca href=\"http://192.168.99.100:30001\"\u003ehttp://192.168.99.100:30001\u003c/a\u003e is the default backend for the ingress controller), your ips can be different but the basics are the same.\u003c/p\u003e\n\n\u003cp\u003eSample screenshot:\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"/img/wordpress-example.png\" alt=\"Wordpress example\" /\u003e\u003c/p\u003e\n\n\u003ch3 id=\"notes\"\u003eNotes\u003c/h3\u003e\n\n\u003cp\u003eAs long as we have the \u003ca href=\"https://kubernetes.io/docs/concepts/storage/persistent-volumes/\"\u003epersistent volume\u003c/a\u003e our data should be preserved in this case the PV is used for tha database, but we could add another volume to preserve images, etc.\u003c/p\u003e\n\n\u003cp\u003eClean everything up:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003ehelm del --purge plucking-condor\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eThat\u0026rsquo;s all I have for now, I will be adding more content next week.\u003c/p\u003e\n\n\u003ch3 id=\"don-t-repeat-yourself\"\u003eDon\u0026rsquo;t Repeat Yourself\u003c/h3\u003e\n\n\u003cp\u003eDRY is a good design goal and part of the art of a good template is knowing when to add a new template and when to update or use an existing one. While helm and go helps with that, there is no perfect tool so we will explore other options in the following posts, explore what the community provides and what seems like a suitable tool for you. Happy Helming!.\u003c/p\u003e\n\n\u003ch3 id=\"upcoming-topics\"\u003eUpcoming topics\u003c/h3\u003e\n\n\u003cp\u003eThe following posts will be about package managers, development deployment tools, etc. It\u0026rsquo;s hard to put all the tools in a category, but they are trying to solve similar problems in different ways, and we will be exploring the ones that seem more promising to me, if you would like me to cover any other tool/project/whatever, just send me a message :)\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eGetting started with Ksonnet and friends.\u003c/li\u003e\n\u003cli\u003eGetting started with Skaffold.\u003c/li\u003e\n\u003cli\u003eGetting started with Gitkube.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3 id=\"errata\"\u003eErrata\u003c/h3\u003e\n\n\u003cp\u003eIf you spot any error or have any suggestion, please send me a message so it gets fixed.\u003c/p\u003e\n\n\u003cp\u003eAlso you can check the source code and changes in the \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003egenerated code\u003c/a\u003e and the \u003ca href=\"https://github.com/kainlite/blog\"\u003esources here\u003c/a\u003e\u003c/p\u003e\n"
    }, 
    {
      "id": "https://kainlite.github.io/blog/getting_started_with_helm/",
      "url": "https://kainlite.github.io/blog/getting_started_with_helm/",
      "title": "Getting started with Helm",
      "date_published": "2018-12-23T00:00:00Z",
      "content_html": "\n\n\u003ch3 id=\"introduction\"\u003e\u003cstrong\u003eIntroduction\u003c/strong\u003e\u003c/h3\u003e\n\n\u003cp\u003eThis tutorial will show you how to create a simple chart and also how to deploy it to kubernetes using \u003ca href=\"https://helm.sh/\"\u003eHelm\u003c/a\u003e, in the examples I will be using \u003ca href=\"https://kubernetes.io/docs/tasks/tools/install-minikube\"\u003eminikube\u003c/a\u003e or you can \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003echeck out this repo\u003c/a\u003e that has a good overview of minikube, once installed and started (\u003ccode\u003eminikube start\u003c/code\u003e) that command will download and configure the local environment, you can follow with the following example:\u003c/p\u003e\n\n\u003cp\u003eCreate the chart:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003ehelm create hello-world\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAlways use valid DNS names if you are going to have services, otherwise you will have issues later on.\u003c/p\u003e\n\n\u003cp\u003eInspect the contents, as you will notice every resource is just a kubernetes resource with some placeholders and basic logic to get something more reusable:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003ecd hello-world\n\ncharts       \u0026lt;--- Dependencies, charts that your chart depends on.\nChart.yaml   \u0026lt;--- Metadata mostly, defines the version of your chart, etc.\ntemplates    \u0026lt;--- Here is where the magic happens.\nvalues.yaml  \u0026lt;--- Default values file (this is used to replace in the templates at runtime)\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nNote: the following link explains the basics of \u003ca href=\"https://docs.helm.sh/developing_charts/#managing-dependencies-manually-via-the-charts-directory\"\u003edependencies\u003c/a\u003e, your chart can have as many dependencies as you need, the only thing that you need to do is add or install the other charts as dependencies.\u003c/p\u003e\n\n\u003cp\u003eThe file \u003ccode\u003evalues.yaml\u003c/code\u003e by default will look like the following snippet:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003ereplicaCount: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\nimage:\n  repository: nginx\n  tag: stable\n  pullPolicy: IfNotPresent\n\nnameOverride: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\nfullnameOverride: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\n\nservice:\n  type: ClusterIP\n  port: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\ningress:\n  enabled: \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n  annotations: {}\n    \u003cspan style=\"color:#75715e\"\u003e# kubernetes.io/ingress.class: nginx\u003c/span\u003e\n    \u003cspan style=\"color:#75715e\"\u003e# kubernetes.io/tls-acme: \u0026#34;true\u0026#34;\u003c/span\u003e\n  path: /\n  hosts:\n    - chart-example.local\n  tls: []\n  \u003cspan style=\"color:#75715e\"\u003e#  - secretName: chart-example-tls\u003c/span\u003e\n  \u003cspan style=\"color:#75715e\"\u003e#    hosts:\u003c/span\u003e\n  \u003cspan style=\"color:#75715e\"\u003e#      - chart-example.local\u003c/span\u003e\n\nresources: {}\nnodeSelector: {}\ntolerations: []\naffinity: {}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eThe next step would be to check the \u003ccode\u003etemplates\u003c/code\u003e folder:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003edeployment.yaml  \u0026lt;--- Standard kubernetes deployment with go templates variables.\n_helpers.tpl     \u0026lt;--- This file defines some common variables.\ningress.yaml     \u0026lt;--- Ingress route, etc.\nNOTES.txt        \u0026lt;--- Once deployed this file will display the details of our deployment, usually login data, how to connect, etc.\nservice.yaml     \u0026lt;--- The service that we will use internally and/or via ingress to reach our deployed service.\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nGo \u003ca href=\"https://blog.gopheracademy.com/advent-2017/using-go-templates/\"\u003etemplates\u003c/a\u003e basics, if you need a refresher or a crash course in go templates, also always be sure to check Helm\u0026rsquo;s own \u003ca href=\"https://github.com/helm/helm/blob/master/docs/chart_template_guide/functions_and_pipelines.md\"\u003edocumentation\u003c/a\u003e and also some \u003ca href=\"https://github.com/helm/helm/blob/master/docs/charts_tips_and_tricks.md\"\u003etips and tricks\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s check the \u003ca href=\"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/\"\u003edeployment\u003c/a\u003e file:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eapiVersion: apps/v1beta2\nkind: Deployment\nmetadata:\n  name: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.fullname\u0026#34;\u003c/span\u003e . }}\n  labels:\n    app.kubernetes.io/name: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.name\u0026#34;\u003c/span\u003e . }}\n    helm.sh/chart: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.chart\u0026#34;\u003c/span\u003e . }}\n    app.kubernetes.io/instance: {{ .Release.Name }}\n    app.kubernetes.io/managed-by: {{ .Release.Service }}\nspec:\n  replicas: {{ .Values.replicaCount }}\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.name\u0026#34;\u003c/span\u003e . }}\n      app.kubernetes.io/instance: {{ .Release.Name }}\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.name\u0026#34;\u003c/span\u003e . }}\n        app.kubernetes.io/instance: {{ .Release.Name }}\n    spec:\n      containers:\n        - name: {{ .Chart.Name }}\n          image: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ .Values.image.repository }}:{{ .Values.image.tag }}\u0026#34;\u003c/span\u003e\n          imagePullPolicy: {{ .Values.image.pullPolicy }}\n          ports:\n            - name: http\n              containerPort: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n              protocol: TCP\n          livenessProbe:\n            httpGet:\n              path: /\n              port: http\n          readinessProbe:\n            httpGet:\n              path: /\n              port: http\n          resources:\n{{ toYaml .Values.resources \u003cspan style=\"color:#e6db74\"\u003e| indent 12 }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    {{- with .Values.nodeSelector }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      nodeSelector:\u003c/span\u003e\n{{ toYaml . \u003cspan style=\"color:#e6db74\"\u003e| indent 8 }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    {{- end }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    {{- with .Values.affinity }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      affinity:\u003c/span\u003e\n{{ toYaml . \u003cspan style=\"color:#e6db74\"\u003e| indent 8 }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    {{- end }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    {{- with .Values.tolerations }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      tolerations:\u003c/span\u003e\n{{ toYaml . \u003cspan style=\"color:#e6db74\"\u003e| indent 8 }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    {{- end }}\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAs you can see everything will get replaced by what you define in the \u003ccode\u003evalues.yaml\u003c/code\u003e file and everything is under \u003ccode\u003e.Values\u003c/code\u003e unless you define a local variable or some other variable using helpers for example.\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s check the \u003ca href=\"https://kubernetes.io/docs/concepts/services-networking/service/\"\u003eservice\u003c/a\u003e file:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003eapiVersion: v1\nkind: Service\nmetadata:\n  name: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.fullname\u0026#34;\u003c/span\u003e . }}\n  labels:\n    app.kubernetes.io/name: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.name\u0026#34;\u003c/span\u003e . }}\n    helm.sh/chart: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.chart\u0026#34;\u003c/span\u003e . }}\n    app.kubernetes.io/instance: {{ .Release.Name }}\n    app.kubernetes.io/managed-by: {{ .Release.Service }}\nspec:\n  type: {{ .Values.service.type }}\n  ports:\n    - port: {{ .Values.service.port }}\n      targetPort: http\n      protocol: TCP\n      name: http\n  selector:\n    app.kubernetes.io/name: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.name\u0026#34;\u003c/span\u003e . }}\n    app.kubernetes.io/instance: {{ .Release.Name }}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s check the \u003ca href=\"https://kubernetes.io/docs/concepts/services-networking/ingress/\"\u003eingress\u003c/a\u003e file:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e{{- if .Values.ingress.enabled -}}\n{{- $fullName := include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.fullname\u0026#34;\u003c/span\u003e . -}}\n{{- $ingressPath := .Values.ingress.path -}}\napiVersion: extensions/v1beta1\nkind: Ingress\nmetadata:\n  name: {{ $fullName }}\n  labels:\n    app.kubernetes.io/name: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.name\u0026#34;\u003c/span\u003e . }}\n    helm.sh/chart: {{ include \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello-world.chart\u0026#34;\u003c/span\u003e . }}\n    app.kubernetes.io/instance: {{ .Release.Name }}\n    app.kubernetes.io/managed-by: {{ .Release.Service }}\n{{- with .Values.ingress.annotations }}\n  annotations:\n{{ toYaml . \u003cspan style=\"color:#e6db74\"\u003e| indent 4 }}\u003c/span\u003e\n{{- end }}\nspec:\n{{- if .Values.ingress.tls }}\n  tls:\n  {{- range .Values.ingress.tls }}\n    - hosts:\n      {{- range .hosts }}\n        - {{ . \u003cspan style=\"color:#e6db74\"\u003e| quote }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      {{- end }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      secretName: {{ .secretName }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  {{- end }}\u003c/span\u003e\n{{- end }}\n  rules:\n  {{- range .Values.ingress.hosts }}\n    - host: {{ . \u003cspan style=\"color:#e6db74\"\u003e| quote }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e      http:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e        paths:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e          - path: {{ $ingressPath }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e            backend:\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e              serviceName: {{ $fullName }}\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e              servicePort: http\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  {{- end }}\u003c/span\u003e\n{{- end }}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nThe ingress file is one of the most interesting ones in my humble opinion because it has a if else example and also local variables (\u003ccode\u003e$fullName\u003c/code\u003e for example), also iterates over a possible slice of dns record names (hosts), and the same if you have certs for them (a good way to get let\u0026rsquo;s encrypt certificates automatically is using cert-manager, in the next post I will expand on this example adding a basic web app with mysql and ssl/tls).\u003c/p\u003e\n\n\u003cp\u003eAfter checking that everything is up to our needs the only thing missing is to finally deploy it to kubernetes (But first let\u0026rsquo;s install tiller):\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ helm init\n$HELM_HOME has been configured at /home/gabriel/.helm.\n\nTiller (the Helm server-side component) has been installed into your Kubernetes Cluster.\n\nPlease note: by default, Tiller is deployed with an insecure \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;allow unauthenticated users\u0026#39;\u003c/span\u003e policy.\nTo prevent this, run `helm init` with the --tiller-tls-verify flag.\nFor more information on securing your installation see: https://docs.helm.sh/using_helm/\u003cspan style=\"color:#75715e\"\u003e#securing-your-helm-installation\u003c/span\u003e\nHappy Helming!\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nNote that many of the complains that Helm receives are because of the admin-y capabilities that Tiller has. A good note on the security issues that Tiller can suffer and some possible mitigation alternatives can be found on the \u003ca href=\"https://engineering.bitnami.com/articles/helm-security.html\"\u003eBitnami page\u003c/a\u003e, this mostly applies to multi-tenant clusters. And also be sure to check \u003ca href=\"https://docs.helm.sh/using_helm/#securing-your-helm-installation\"\u003eSecuring Helm\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eDeploy our chart:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ helm install --name my-nginx -f values.yaml .\nNAME:   my-nginx\nLAST DEPLOYED: Sun Dec \u003cspan style=\"color:#ae81ff\"\u003e23\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e00\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e30\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e11\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e\nNAMESPACE: default\nSTATUS: DEPLOYED\n\nRESOURCES:\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1/Service\u003c/span\u003e\nNAME                  AGE\nmy-nginx-hello-world  0s\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1beta2/Deployment\u003c/span\u003e\nmy-nginx-hello-world  0s\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1/Pod(related)\u003c/span\u003e\n\nNAME                                   READY  STATUS   RESTARTS  AGE\nmy-nginx-hello-world-6f948db8d5-s76zl  \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e    Pending  \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e         0s\n\nNOTES:\n\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e. Get the application URL by running these commands:\n  export POD_NAME=$(kubectl get pods --namespace default -l \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app.kubernetes.io/name=hello-world,app.kubernetes.io/instance=my-nginx\u0026#34;\u003c/span\u003e -o jsonpath=\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{.items[0].metadata.name}\u0026#34;\u003c/span\u003e)\n  echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Visit http://127.0.0.1:8080 to use your application\u0026#34;\u003c/span\u003e\n  kubectl port-forward $POD_NAME \u003cspan style=\"color:#ae81ff\"\u003e8080\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nOur deployment was successful and we can see that our pod is waiting to be scheduled.\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s check that our service is there:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl get services\nNAME                   TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE\nkubernetes             ClusterIP   \u003cspan style=\"color:#ae81ff\"\u003e10.96\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e       \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;        443/TCP   1h\u003c/span\u003e\nmy-nginx-hello-world   ClusterIP   \u003cspan style=\"color:#ae81ff\"\u003e10.111\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e222.70\u003c/span\u003e   \u0026lt;none\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;        80/TCP    5m\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eAnd now we can test that everything is okay by running another pod in interactive mode, for example:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl run -i --tty alpine --image=alpine -- sh\nIf you don\u0026#39;t see a command prompt, try pressing enter.\n\n/ \u003cspan style=\"color:#75715e\"\u003e# apk add curl\u003c/span\u003e\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.\u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.\u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e/community/x86_64/APKINDEX.tar.gz\n(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e) Installing ca-certificates (\u003cspan style=\"color:#ae81ff\"\u003e20171114\u003c/span\u003e-r3)\n(\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e) Installing nghttp2-libs (\u003cspan style=\"color:#ae81ff\"\u003e1.32\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e-r0)\n(\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e) Installing libssh2 (\u003cspan style=\"color:#ae81ff\"\u003e1.8\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e-r3)\n(\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e) Installing libcurl (\u003cspan style=\"color:#ae81ff\"\u003e7.61\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e-r1)\n(\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e) Installing curl (\u003cspan style=\"color:#ae81ff\"\u003e7.61\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e-r1)\nExecuting busybox-\u003cspan style=\"color:#ae81ff\"\u003e1.28\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e-r2.trigger\nExecuting ca-certificates-\u003cspan style=\"color:#ae81ff\"\u003e20171114\u003c/span\u003e-r3.trigger\nOK: \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e MiB in \u003cspan style=\"color:#ae81ff\"\u003e18\u003c/span\u003e packages\n\n/ \u003cspan style=\"color:#75715e\"\u003e# curl -v my-nginx-hello-world\u003c/span\u003e\n* Rebuilt URL to: my-nginx-hello-world/\n*   Trying \u003cspan style=\"color:#ae81ff\"\u003e10.111\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e222.70\u003c/span\u003e...\n* TCP_NODELAY set\n* Connected to my-nginx-hello-world (\u003cspan style=\"color:#ae81ff\"\u003e10.111\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e222.70\u003c/span\u003e) port \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e (\u003cspan style=\"color:#75715e\"\u003e#0)\u003c/span\u003e\n\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; GET / HTTP/1.1\u003c/span\u003e\n\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Host: my-nginx-hello-world\u003c/span\u003e\n\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; User-Agent: curl/7.61.1\u003c/span\u003e\n\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; Accept: */*\u003c/span\u003e\n\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt; HTTP/1.1 200 OK\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt; Server: nginx/1.14.2\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt; Date: Sun, 23 Dec 2018 03:45:31 GMT\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt; Content-Type: text/html\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt; Content-Length: 612\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt; Last-Modified: Tue, 04 Dec 2018 14:44:49 GMT\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt; Connection: keep-alive\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt; ETag: \u0026#34;5c0692e1-264\u0026#34;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt; Accept-Ranges: bytes\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;!DOCTYPE html\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;html\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;head\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;title\u0026gt;Welcome to nginx!\u0026lt;/title\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;style\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    body {\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e        width: 35em;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e        margin: 0 auto;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e        font-family: Tahoma, Verdana, Arial, sans-serif;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e    }\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;/style\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;/head\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;body\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;h1\u0026gt;Welcome to nginx!\u0026lt;/h1\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;p\u0026gt;If you see this page, the nginx web server is successfully installed and\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eworking. Further configuration is required.\u0026lt;/p\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;p\u0026gt;For online documentation and support please refer to\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;a href=\u0026#34;http://nginx.org/\u0026#34;\u0026gt;nginx.org\u0026lt;/a\u0026gt;.\u0026lt;br/\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eCommercial support is available at\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;a href=\u0026#34;http://nginx.com/\u0026#34;\u0026gt;nginx.com\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Thank you for using nginx.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;/body\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026lt;/html\u0026gt;\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e* Connection #0 to host my-nginx-hello-world left intact\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAnd voila we see our nginx deployed there and accessible via service name to our other pods (this is fantastic for microservices).\u003c/p\u003e\n\n\u003cp\u003eOur current deployment can be checked like this:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ helm ls\nNAME            REVISION        UPDATED                         STATUS          CHART                   APP VERSION     NAMESPACE\nmy-nginx        \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e               Sun Dec \u003cspan style=\"color:#ae81ff\"\u003e23\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e00\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e30\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e11\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e        DEPLOYED        hello-world-\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e       \u003cspan style=\"color:#ae81ff\"\u003e1.0\u003c/span\u003e             default\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eThe last example would be to upgrade our deployment, lets change the \u003ccode\u003etag\u003c/code\u003e in the \u003ccode\u003evalues.yaml\u003c/code\u003e file from \u003ccode\u003estable\u003c/code\u003e to \u003ccode\u003emainline\u003c/code\u003e and update also the metadata file (\u003ccode\u003eChart.yaml\u003c/code\u003e) to let Helm know that this is a new version of our chart.\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e $ helm upgrade my-nginx . -f values.yaml\nRelease \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;my-nginx\u0026#34;\u003c/span\u003e has been upgraded. Happy Helming!\nLAST DEPLOYED: Sun Dec \u003cspan style=\"color:#ae81ff\"\u003e23\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e00\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e55\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e22\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e\nNAMESPACE: default\nSTATUS: DEPLOYED\n\nRESOURCES:\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1/Pod(related)\u003c/span\u003e\nNAME                                   READY  STATUS             RESTARTS  AGE\nmy-nginx-hello-world-6f948db8d5-s76zl  \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e    Running            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e         25m\nmy-nginx-hello-world-c5cdcc95c-shgc6   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e/\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e    ContainerCreating  \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e         0s\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1/Service\u003c/span\u003e\n\nNAME                  AGE\nmy-nginx-hello-world  25m\n\n==\u003cspan style=\"color:#e6db74\"\u003e\u0026gt; v1beta2/Deployment\u003c/span\u003e\nmy-nginx-hello-world  25m\n\n\nNOTES:\n\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e. Get the application URL by running these commands:\n  export POD_NAME=$(kubectl get pods --namespace default -l \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;app.kubernetes.io/name=hello-world,app.kubernetes.io/instance=my-nginx\u0026#34;\u003c/span\u003e -o jsonpath=\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{.items[0].metadata.name}\u0026#34;\u003c/span\u003e)\n  echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Visit http://127.0.0.1:8080 to use your application\u0026#34;\u003c/span\u003e\n  kubectl port-forward $POD_NAME \u003cspan style=\"color:#ae81ff\"\u003e8080\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nNote that I always specify the -f values.yaml just for explicitness.\u003c/p\u003e\n\n\u003cp\u003eIt seems that our upgrade went well, let\u0026rsquo;s see what Helm sees\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ helm ls\nNAME            REVISION        UPDATED                         STATUS          CHART                   APP VERSION     NAMESPACE\nmy-nginx        \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e               Sun Dec \u003cspan style=\"color:#ae81ff\"\u003e23\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e00\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e55\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e22\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2018\u003c/span\u003e        DEPLOYED        hello-world-\u003cspan style=\"color:#ae81ff\"\u003e0.1\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e       \u003cspan style=\"color:#ae81ff\"\u003e1.0\u003c/span\u003e             default\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eBut before we go let\u0026rsquo;s validate that it did deployed the nginx version that we wanted to have:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl exec my-nginx-hello-world-c5cdcc95c-shgc6 -- /usr/sbin/nginx -v\nnginx version: nginx/\u003cspan style=\"color:#ae81ff\"\u003e1.15\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nAt the moment of this writing mainline is 1.15.7, we could rollback to the previous version by doing:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ helm rollback my-nginx \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\nRollback was a success! Happy Helming!\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\nBasically this command needs a deployment name \u003ccode\u003emy-nginx\u003c/code\u003e and the revision number to rollback to in this case \u003ccode\u003e1\u003c/code\u003e.\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s check the versions again:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ kubectl exec my-nginx-hello-world-6f948db8d5-bsml2 -- /usr/sbin/nginx -v\nnginx version: nginx/\u003cspan style=\"color:#ae81ff\"\u003e1.14\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eLet\u0026rsquo;s clean up:\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ helm del --purge my-nginx\nrelease \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;my-nginx\u0026#34;\u003c/span\u003e deleted\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eIf you need to see what will be sent to the kubernetes API then you can use the following command (sometimes it\u0026rsquo;s really useful for debugging or to inject a sidecar using pipes):\n\u003cdiv class=\"highlight\"\u003e\u003cpre style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e$ helm template . -name my-nginx -f values.yaml\n\u003cspan style=\"color:#75715e\"\u003e# Source: hello-world/templates/service.yaml\u003c/span\u003e\napiVersion: v1\nkind: Service\nmetadata:\n  name: ame-hello-world\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eAnd that folks is all I have for now, be sure to check own \u003ca href=\"https://docs.helm.sh/\"\u003eHelm Documentation\u003c/a\u003e and \u003ccode\u003ehelm help\u003c/code\u003e to know more about what helm can do to help you deploy your applications to any kubernetes cluster.\u003c/p\u003e\n\n\u003ch3 id=\"don-t-repeat-yourself\"\u003eDon\u0026rsquo;t Repeat Yourself\u003c/h3\u003e\n\n\u003cp\u003eDRY is a good design goal and part of the art of a good template is knowing when to add a new template and when to update an existing one. While you\u0026rsquo;re figuring that out, accept that you\u0026rsquo;ll be doing some refactoring. Helm and go makes that easy and fast.\u003c/p\u003e\n\n\u003ch3 id=\"upcoming-topics\"\u003eUpcoming topics\u003c/h3\u003e\n\n\u003cp\u003eThe following posts will be about package managers, development deployment tools, etc. It\u0026rsquo;s hard to put all the tools in a category, but they are trying to solve similar problems in different ways, and we will be exploring the ones that seem more promising to me, if you would like me to cover any other tool/project/whatever, just send me a message :)\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://kainlite.github.io/blog/deploying_my_apps_with_helm/\"\u003eExpand on helm, search and install community charts\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://kainlite.github.io/blog/getting_started_with_ksonnet/\"\u003eGetting started with Ksonnet and friends\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://kainlite.github.io/blog/getting_started_with_skaffold/\"\u003eGetting started with Skaffold\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://kainlite.github.io/blog/getting_started_with_gitkube/\"\u003eGetting started with Gitkube\u003c/a\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3 id=\"errata\"\u003eErrata\u003c/h3\u003e\n\n\u003cp\u003eIf you spot any error or have any suggestion, please send me a message so it gets fixed.\u003c/p\u003e\n\n\u003cp\u003eAlso you can check the source code and changes in the \u003ca href=\"https://github.com/kainlite/kainlite.github.io\"\u003egenerated code\u003c/a\u003e and the \u003ca href=\"https://github.com/kainlite/blog\"\u003esources here\u003c/a\u003e\u003c/p\u003e\n"
    }
  ]
}
